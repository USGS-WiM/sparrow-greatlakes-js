function addCommas(e){e+="";for(var t=e.split("."),i=t[0],a=t.length>1?"."+t[1]:"",n=/(\d+)(\d{3})/;n.test(i);)i=i.replace(n,"$1,$2");return i+a}function camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}function loadEventHandlers(){function e(e,t,i,a,n){$("#clear_btn").append("<a class='"+e+"' data-toggle='tooltip' data-placement='top' title='Cannot show "+t+" Area of Interest while grouping by "+i+".'><span class='glyphicon glyphicon-warning-sign'></span></a>"),$(a+" option").attr("selected",!1),app.clearOneLayerDefObj(n);var s={currentTarget:{id:a,value:""}};AOIChange(s)}$(".radio").on("change",function(e){$("#page-loader").fadeIn();var t=$("#groupResultsSelect")[0].selectedIndex,i=this.firstElementChild.id;populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),setAggregateGroup(t,i),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&($("#toast_body").html("Chart updating"),$("#toast-fixed").fadeIn(),app.createChartQuery())}),$("#phosphorusDownload").click(function(){window.location="https://test.wim.usgs.gov/SparrowGreatLakesV2/downloads/greatlakes_shapefiles_phosphorus.zip"}),$("#nitrogenDownload").click(function(){window.location="https://test.wim.usgs.gov/SparrowGreatLakesV2/downloads/greatlakes_shapefiles_nitrogen.zip"}),$("#popupChartButton").on("click",function(){app.createChartQuery()}),$(".aoiSelect").on("change",AOIChange),$("#groupResultsSelect").on("loaded.bs.select",function(){populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),generateRenderer()});var t=$("#clickPolyButton");t.click(function(){app.clickSelectionActive?(t.removeClass("active"),$("#shiftNote").remove(),t.html('<span class="glyphicon glyphicon-plus"></span>&nbsp;&nbsp;Select'),app.map.setMapCursor("auto"),app.clickSelectionActive=!1,$("#chartButton").prop("disabled",!1)):app.clickSelectionActive||($("#customSelect").append('<div id="shiftNote" style="padding-left: 1em;color: orangered;">Shift+Click to Deselect</div>'),t.addClass("active"),t.html('<i class="glyphicon glyphicon-stop"></i>&nbsp;&nbsp;Stop selecting'),app.map.setMapCursor("crosshair"),$("#chartButton").prop("disabled",!0),app.clickSelectionActive=!0)}),$("#groupResultsSelect").on("changed.bs.select",function(e){app.clearFindGraphics(),populateMetricOptions(e.currentTarget.selectedIndex),setAggregateGroup(e.currentTarget.selectedIndex,$(".radio input[type='radio']:checked")[0].id),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&(app.map.graphics.clear(),app.createChartQuery())}),$("#displayedMetricSelect").on("changed.bs.select",function(e){$("#page-loader").fadeIn(),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&($("#toast_body").html("Chart updating"),$("#toast-fixed").fadeIn(),app.createChartQuery())}),$("#clearAOIButton").on("click",function(){$("#page-loader").fadeIn();var e=app.map.getLayer("SparrowRanking").visibleLayers[0];if($.inArray(e,splitLayers)>-1){e=returnDefaultLayer(e,$(".radio input[type='radio']:checked")[0].id);var t=[];t.push(e),app.map.getLayer("SparrowRanking").setVisibleLayers(t),app.map.getLayer("SparrowRanking").setDefaultLayerDefinitions(!0)}else app.map.getLayer("SparrowRanking").setDefaultLayerDefinitions(!0);$(".aoiSelect").selectpicker("val",""),populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),app.clearLayerDefObj(),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&($("#toast_body").html("Chart updating"),$("#toast-fixed").fadeIn(),app.createChartQuery())}),$(".nonAOISelect").on("change",function(){switch($("#page-loader").fadeIn(),$("#grp1-select").removeClass("disabled"),$("#grp1-select").removeAttr("disabled"),$(".grp1-warning").remove(),$("#grp2-select").removeClass("disabled"),$("#grp2-select").removeAttr("disabled"),$(".grp2-warning").remove(),$("#grp3-select").removeClass("disabled"),$("#grp3-select").removeAttr("disabled"),$(".grp3-warning").remove(),$("#groupResultsSelect")[0].selectedIndex){case 0:$("#grp1-select").selectpicker("refresh"),$("#grp2-select").selectpicker("refresh"),$("#grp3-select").selectpicker("refresh");break;case 1:app.getLayerDefObj().AOI2&&e("grp2-warning","Tributary","HUC8","#grp2-select","AOI2"),$("#grp2-select").attr("disabled","disabled"),$("#grp2-select").addClass("disabled"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh"),$("#grp3-select").selectpicker("refresh");break;case 2:app.getLayerDefObj().AOI3&&e("grp3-warning","HUC8","Tributary","#grp3-select","AOI3"),$("#grp3-select").attr("disabled","disabled"),$("#grp3-select").addClass("disabled"),$("#grp3-select").selectpicker("refresh"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh");break;case 3:app.getLayerDefObj().AOI2&&e("grp2-warning","Tributary","Main River Basin","#grp2-select","AOI2"),$("#grp2-select").attr("disabled","disabled"),$("#grp2-select").addClass("disabled"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh"),app.getLayerDefObj().AOI3&&e("grp3-warning","HUC8","Main River Basin","#grp3-select","AOI3"),$("#grp3-select").attr("disabled","disabled"),$("#grp3-select").addClass("disabled"),$("#grp3-select").selectpicker("refresh");break;case 4:app.getLayerDefObj().AOI1&&e("grp1-warning","Main River Basin","State","#grp1-select","AOI1"),$("#grp1-select").attr("disabled","disabled"),$("#grp1-select").addClass("disabled"),$("#grp1-select").selectpicker("refresh"),app.getLayerDefObj().AOI2&&e("grp2-warning","Tributary","State","#grp2-select","AOI2"),$("#grp2-select").attr("disabled","disabled"),$("#grp2-select").addClass("disabled"),$("#grp2-select").selectpicker("refresh"),app.getLayerDefObj().AOI3&&e("grp3-warning","HUC8","State","#grp3-select","AOI3"),$("#grp3-select").attr("disabled","disabled"),$("#grp3-select").addClass("disabled"),$("#grp3-select").selectpicker("refresh")}}),$("#chartButton").on("click",function(){""!=app.userSelectedDispFieldName?(app.formattedHighlightString=app.userSelectedDispFieldName+" IN ("+app.userSelectedShapes.join(",")+")",app.customChartClicked=!0,console.log("Custom Click: "+app.formattedHighlightString),app.createChartQuery(app.formattedHighlightString),app.userSelectedDispFieldName="",app.userSelectedShapes=[]):app.createChartQuery()}),$(window).resize(function(){$("#legendCollapse").hasClass("in")?(maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("height",maxLegendHeight),$("#legendElement").css("max-height",maxLegendHeight),maxLegendDivHeight=$("#legendElement").height()-parseInt($("#legendHeading").css("height").replace("px","")),$("#legendDiv").css("max-height",maxLegendDivHeight)):$("#legendElement").css("height","initial")}),app.map.on("load",function(){app.initMapScale(),app.map.infoWindow.set("highlight",!1),app.map.infoWindow.set("titleInBody",!1),app.setupDraggableInfoWindow(),app.map.disableClickRecenter()}),app.map.on("zoom-end",function(){var e=app.map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e)}),app.map.on("mouse-move",function(e){app.updateMousePosition(e)}),app.map.on("pan-end",function(){app.updateMapCenter(app.map.extent)}),app.map.on("click",function(e){app.identifyParams=new esri.tasks.IdentifyParameters,app.identifyParams.tolerance=8,app.identifyParams.returnGeometry=!0,app.identifyParams.layerOption=esri.tasks.IdentifyParameters.LAYER_OPTION_VISIBLE,app.identifyParams.width=app.map.width,app.identifyParams.height=app.map.height,app.identifyTask=new esri.tasks.IdentifyTask(serviceBaseURL),app.map.getLayer("SparrowRanking").layerDefinitions&&(app.identifyParams.layerDefinitions=app.map.getLayer("SparrowRanking").layerDefinitions),app.executeIdentifyTask(e)}),$("#btnStreets").on("click",function(){app.map.setBasemap("streets"),app.map.removeLayer(nationalMapBasemap)}),$("#btnSatellite").on("click",function(){app.map.setBasemap("satellite"),app.map.removeLayer(nationalMapBasemap)}),$("#btnHybrid").on("click",function(){app.map.setBasemap("hybrid"),app.map.removeLayer(nationalMapBasemap)}),$("#btnTerrain").on("click",function(){app.map.setBasemap("terrain"),app.map.removeLayer(nationalMapBasemap)}),$("#btnGray").on("click",function(){app.map.setBasemap("gray"),app.map.removeLayer(nationalMapBasemap)}),$("#btnNatGeo").on("click",function(){app.map.setBasemap("national-geographic"),app.map.removeLayer(nationalMapBasemap)}),$("#btnOSM").on("click",function(){app.map.setBasemap("osm"),app.map.removeLayer(nationalMapBasemap)}),$("#btnTopo").on("click",function(){app.map.setBasemap("topo"),app.map.removeLayer(nationalMapBasemap)})}function populateMetricOptions(e){var t;if("radio1"==$(".radio input[type='radio']:checked")[0].id)switch(e){case 0:t=$("#st-select")[0].selectedIndex>0?Catchments_st:Catchments;break;case 1:t=$("#st-select")[0].selectedIndex>0?Group3_st:Group3;break;case 2:t=$("#st-select")[0].selectedIndex>0?Group2_st:Group2;break;case 3:t=$("#st-select")[0].selectedIndex>0?Group1_st:Group1;break;case 4:t=ST}else if("radio2"==$(".radio input[type='radio']:checked")[0].id)switch(e){case 0:t=$("#st-select")[0].selectedIndex>0?Catchments_st_tn:Catchments_tn;break;case 1:t=$("#st-select")[0].selectedIndex>0?Group3_st_tn:Group3_tn;break;case 2:t=$("#st-select")[0].selectedIndex>0?Group2_st_tn:Group2_tn;break;case 3:t=$("#st-select")[0].selectedIndex>0?Group1_st_tn:Group1_tn;break;case 4:t=ST_tn}$("#displayedMetricSelect").find("option").remove(),$.each(t,function(e,t){$("#displayedMetricSelect").append(new Option(t.name,t.field)),$("#displayedMetricSelect").selectpicker("refresh")})}function returnDefaultLayer(e){switch(e){case 5:return 0;case 6:return 1;case 7:return 2;case 8:return 3;case 14:return 9;case 15:return 10;case 16:return 11;case 17:return 12}}function setAggregateGroup(e,t){if("radio1"==t){var i;switch(e){case 0:i=$("#st-select")[0].selectedIndex>0?5:0;break;case 1:i=$("#st-select")[0].selectedIndex>0?6:1;break;case 2:i=$("#st-select")[0].selectedIndex>0?7:2;break;case 3:i=$("#st-select")[0].selectedIndex>0?8:3;break;case 4:i=4}}else if("radio2"==t){var i;switch(e){case 0:i=$("#st-select")[0].selectedIndex>0?14:9;break;case 1:i=$("#st-select")[0].selectedIndex>0?15:10;break;case 2:i=$("#st-select")[0].selectedIndex>0?16:11;break;case 3:i=$("#st-select")[0].selectedIndex>0?17:12;break;case 4:i=13}}var a=[i],n=app.map.getLayer("SparrowRanking");n.setVisibleLayers(a)}function AOIChange(e){$("#page-loader").fadeIn();var t=e.currentTarget.id,i=e.currentTarget.value,a=$("#groupResultsSelect")[0].selectedIndex,n={selectedId:t,selectedValue:i};"st-select"==t&&4!=a&&(populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),setAggregateGroup(a,$(".radio input[type='radio']:checked")[0].id)),""!=n.selectedValue&&app.setLayerDefObj(n),setLayerDefs(),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&($("#toast_body").html("Chart updating"),$("#toast-fixed").fadeIn(),app.map.graphics.clear(),app.createChartQuery())}function setLayerDefs(){var e="",t=app.getLayerDefObj();t.AOIST&&(e+=""!=e?" AND ST = '"+t.AOIST+"'":"ST = '"+t.AOIST+"'"),t.AOI1&&(e+=""!=e?" AND GP1 = '"+t.AOI1+"'":"GP1 = '"+t.AOI1+"'"),t.AOI2&&(e+=""!=e?" AND GP2 = '"+t.AOI2+"'":"GP2 = '"+t.AOI2+"'"),t.AOI3&&(e+=""!=e?" AND GP3 = '"+t.AOI3+"'":"GP3 = '"+t.AOI3+"'");var i=[];i[0]=e,i[1]=e,i[2]=e,i[3]=e,i[4]=e,i[5]=e,i[6]=e,i[7]=e,i[8]=e,i[9]=e,i[10]=e,i[11]=e,i[12]=e,i[13]=e,i[14]=e,i[15]=e,i[16]=e,i[17]=e,app.map.getLayer("SparrowRanking").setLayerDefinitions(i)}function getTableFields(e,t){var i=[],a=[],n=[],s="";switch(t){case 0:n=Group3,s="GP3",$.each(tableOutFields,function(e,t){i.push(t)});break;case 4:n=Group3_st,s="SG3",$.each(stateTableOutFields,function(e,t){i.push(t)});break;case 7:n=Group3_tn,s="GP3",$.each(tableOutFields,function(e,t){i.push(t)});break;case 11:n=Group3_st_tn,s="SG3",$.each(stateTableOutFields,function(e,t){i.push(t)})}return $.each(n,function(e,t){i.push({field:t.field,name:t.name}),$.each(t.chartOutfields,function(e,t){t.attribute==s&&i.map(function(e){return e.field}).indexOf(s)<0?i.push({field:t.attribute,name:t.label}):t.attribute!=s&&i.push({field:t.attribute,name:t.label})})}),a.push("<tr>"),$.each(e,function(e,t){console.log(t),$.each(i,function(e,i){return t==i.field?(console.log(i.field),a.push("<th>"+i.name+"</th>"),!1):void 0})}),a.push("</tr>"),a.join("")}function getLegendLabels(e){var t="",i=app.getLayerConfigObject(e);return $.each(i,function(e,i){$("#displayedMetricSelect").val()==i.field&&(t=i.name)}),t}function getChartOutfields(e){var t=[];console.log("in GetChartOutfields()");var i=app.getLayerConfigObject(e);return $.each(i,function(e,i){$("#displayedMetricSelect").val()==i.field&&$.each(i.chartOutfields,function(e,i){t.push(i)})}),t}function getExtraOutfields(e,t){var i=e;switch(t){case 0:case 9:i.push("DEMIAREA"),i.push("DEMTAREA"),i.push("MRB_ID");break;case 1:case 10:i.push("GP3_AREA");break;case 2:case 11:i.push("GP2_AREA");break;case 3:case 12:i.push("GP1_AREA");break;case 4:case 13:i.push("ST_AREA");break;case 5:case 14:i.push("STDEMIAREA"),i.push("STDEMTAREA"),i.push("ST_MRB_ID");break;case 6:case 15:i.push("SG3_AREA");break;case 7:case 16:i.push("SG2_AREA");break;case 8:case 17:i.push("SG1_AREA")}return i}function generateRenderer(){require(["esri/map","esri/Color","esri/dijit/Legend","esri/layers/LayerDrawingOptions","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/tasks/ClassBreaksDefinition","esri/tasks/AlgorithmicColorRamp","esri/tasks/GenerateRendererParameters","esri/tasks/GenerateRendererTask","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(e,t,i,a,n,s,o,r,l,p,c,u,d){function f(e){var t=app.map.getLayer("SparrowRanking").visibleLayers[0],i=app.map.getLayer("SparrowRanking"),n=[],s=new a;s.renderer=e,n[t]=s,i.setLayerDrawingOptions(n),app.hasOwnProperty("legend")?app.legend.refresh([{layer:app.map.getLayer("SparrowRanking"),title:getLegendLabels(app.map.getLayer("SparrowRanking").visibleLayers[0])}]):h(),0==i.visible&&i.show(),$("#page-loader").fadeOut()}function b(e){console.log("generateRenderer Err ",e),$("#page-loader").fadeOut()}function h(){app.legend=new i({map:app.map,layerInfos:[{layer:app.map.getLayer("SparrowRanking"),title:getLegendLabels(app.map.getLayer("SparrowRanking").visibleLayers[0])}]},c.byId("legendDiv")),app.legend.startup()}var m=app.map.getLayer("SparrowRanking").visibleLayers[0];if(app.map.getLayer("SparrowRanking").layerDefinitions){var D=app.map.getLayer("SparrowRanking").layerDefinitions[m];app.layerDef=D}else app.map.getLayer("SparrowRanking").setDefaultLayerDefinitions(),app.layerDef="1=1";app.Url="https://gis.wim.usgs.gov/arcgis/rest/services/SparrowGreatLakesV2/SparrowGreatLakes/MapServer/"+m;var S=$("#displayedMetricSelect")[0].value;app.outFields=[S],app.currentAttribute=S;var g=new o;g.classificationField=app.currentAttribute,g.classificationMethod="quantile",g.breakCount=5,g.baseSymbol=new s(s.STYLE_SOLID,new n(n.STYLE_SOLID,new t([168,168,168]),.1));var _=new r;"radio1"==$(".radio input[type='radio']:checked")[0].id?(_.fromColor=new t.fromHex("#FFF1DC"),_.toColor=new t.fromHex("#632E0E")):(_.fromColor=new t.fromHex("#F5EBB8"),_.toColor=new t.fromHex("#004120")),_.algorithm="hsv",g.colorRamp=_;var y=new l;y.classificationDefinition=g,y.formatLabel=!1,y.where=app.layerDef;var A=new p(app.Url);A.execute(y,f,b)})}var serviceBaseURL="https://gis.wim.usgs.gov/arcgis/rest/services/SparrowGreatLakesV2/SparrowGreatLakes/MapServer/",chartUnits=" (kg/yr.)",groupResultsInitIndex=1,splitLayers=[5,6,7,13,14,15],mapCenter=[-87,42];defaultZoomLevel=6;var tableOutFields=[{field:"FID",name:"Unique Feature Id"},{field:"GRP1",name:"Main River Basin"},{field:"GRP2",name:"Tributary"},{field:"GRP_3_NA_1",name:"Join Field"},{field:"Area_g3",name:"HUC10 area (mi2)"}],stateTableOutFields=[{field:"FID",name:"Unique Feature Id"},{field:"ST_GP3_NAM",name:"HUC10/State (combination) ID"},{field:"Area_S3",name:"HUC10 area within the state and the  model area (mi2)"},{field:"ST",name:"State"},{field:"GRP_1_NAM",name:"Independent Watershed name (in which HUC10 is nested)"},{field:"GP2",name:"HUC8 (in which HUC10 is nested)"},{field:"GRP_3_NAM",name:"HUC10"},{field:"ST_GP1_NAM",name:"State and Independent Watershed"},{field:"ST_GP2_NAM",name:"State amd HUC8"},{field:"ST_gp3_n_1",name:"Join Field"}],aggregateDefinitions={st:"State",gp1:"Main River Basin",gp2:"Tributary",gp3:"HUC8",sg1:"State_Main River Basin",sg2:"State_Tributary",sg3:"State_HUC8"},catchmentDefinitions={mrb_id:"Catchment ID",st_mrb_id:"Catchment ID by State",pname:"Catchment Name",accl:"Accumulated load (kg)",incl:"Incremental load (kg)",accy:"Accumulated yield (kg/km2)",incy:"Incremental yield (kg/km2)",daccl:"Delivered accumulated load (kg)",daccy:"Delivered accumulated yield (kg/km2)",dincl:"Delivered incremental load  (kg)",dincy:"Delivered incremental yield (kg/km2)"},catchmentDefinitions_tn={mrb_id:"Catchment ID",st_mrb_id:"Catchment ID by State",pname:"Catchment Name",accl:"Accumulated load (kg)",incl:"Incremental load (kg)",accy:"Accumulated yield (kg/km2)",incy:"Incremental yield (kg/km2)",daccl:"Delivered accumulated load (kg)",daccy:"Delivered accumulated yield (kg/km2)",dincl:"Delivered incremental load  (kg)",dincy:"Delivered incremental yield (kg/km2)"},mappedDefinitions={area:"Aggregated area (km2)",al:"Aggregated load (kg)",ay:"Aggregated yield (kg/km2)",dal:"Delivered aggregated load (kg)",day:"Delivered aggregated yield (kg/km2)",ap:"Percent of aggregated load",dap:"Percent of delivered aggregated load"},phosphorusSourceDefinitons={s1:"Urban Land",s2:"Sewerage Point Sources",s3:"Manure (Confined)",s4:"Manure (Unconfined)",s5:"Farm Fertilizer",s6:"Forest/Wetland"},nitrogenSourceDefinitions={s1:"Point Sources",s2:"Manure (Confined)",s3:"Farm Fertilizer",s4:"Additional Agricultural Sources",s5:"Atmospheric Depositon"},phosColors=["#FFCCFF","#BF0000","#663100","#FFEC99","#97DA7C","#0070C0"],nitroColors=["#BF0000","#663100","#FFEC99","#97DA7C","#0070C0"],Catchments=[{field:"ACCL",name:catchmentDefinitions.accl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCL_S1",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s1},{attribute:"ACCL_S2",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s2},{attribute:"ACCL_S3",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s3},{attribute:"ACCL_S4",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s4},{attribute:"ACCL_S5",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s5},{attribute:"ACCL_S6",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s6}]},{field:"INCL",name:catchmentDefinitions.incl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCL_S1",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s1},{attribute:"INCL_S2",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s2},{attribute:"INCL_S3",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s3},{attribute:"INCL_S4",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s4},{attribute:"INCL_S5",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s5},{attribute:"INCL_S6",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s6}]},{field:"ACCY",name:catchmentDefinitions.accy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCY",label:catchmentDefinitions.accy+" all sources"}]},{field:"INCY",name:catchmentDefinitions.incy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCY",label:catchmentDefinitions.incy+" all sources"}]},{field:"DACCL",name:catchmentDefinitions.daccl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCL",label:catchmentDefinitions.daccl+" all sources"}]},{field:"DACCY",name:catchmentDefinitions.daccy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCY",label:catchmentDefinitions.daccy+" all sources"}]},{field:"DINCL",name:catchmentDefinitions.dincl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCL_S1",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s1},{attribute:"DINCL_S2",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s2},{attribute:"DINCL_S3",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s3},{attribute:"DINCL_S4",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s4},{attribute:"DINCL_S5",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s5},{attribute:"DINCL_S6",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s6}]},{field:"DINCY",name:catchmentDefinitions.dincy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCY",label:catchmentDefinitions.dincy+" all sources"}]}],Group3=[{field:"GP3_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"GP3_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"GP3_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"GP3_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],Group2=[{field:"GP2_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"GP2_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"GP2_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"GP2_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"GP2_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"GP2_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"GP2_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"GP2_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"GP2_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"GP2_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"GP2_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"GP2_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"GP2_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"GP2_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"GP2_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"GP2_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"GP2_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"GP2_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"GP2_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"GP2_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"GP2_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"GP2_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"GP2_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"GP2_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],Group1=[{field:"GP1_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"GP1_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"GP1_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"GP1_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"GP1_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"GP1_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"GP1_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"GP1_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"GP1_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"GP1_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"GP1_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"GP1_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"GP1_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"GP1_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"GP1_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"GP1_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"GP1_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"GP1_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"GP1_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"GP1_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"GP1_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"GP1_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"GP1_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"GP1_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],ST=[{field:"ST_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"ST_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"ST_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"ST_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"ST_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"ST_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"ST_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"ST_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"ST_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"ST_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"ST_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"ST_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"ST_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"ST_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"ST_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"ST_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"ST_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"ST_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"ST_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"ST_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"ST_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"ST_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"ST_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"ST_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],Catchments_st=[{field:"ACCL",name:catchmentDefinitions.accl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCL_S1",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s1},{attribute:"ACCL_S2",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s2},{attribute:"ACCL_S3",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s3},{attribute:"ACCL_S4",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s4},{attribute:"ACCL_S5",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s5},{attribute:"ACCL_S6",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s6}]},{field:"INCL",name:catchmentDefinitions.incl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCL_S1",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s1},{attribute:"INCL_S2",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s2},{attribute:"INCL_S3",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s3},{attribute:"INCL_S4",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s4
},{attribute:"INCL_S5",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s5},{attribute:"INCL_S6",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s6}]},{field:"ACCY",name:catchmentDefinitions.accy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCY",label:catchmentDefinitions.accy+" all sources"}]},{field:"INCY",name:catchmentDefinitions.incy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCY",label:catchmentDefinitions.incy+" all sources"}]},{field:"DACCL",name:catchmentDefinitions.daccl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCL",label:catchmentDefinitions.daccl+" all sources"}]},{field:"DACCY",name:catchmentDefinitions.daccy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCY",label:catchmentDefinitions.daccy+" all sources"}]},{field:"DINCL",name:catchmentDefinitions.dincl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCL_S1",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s1},{attribute:"DINCL_S2",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s2},{attribute:"DINCL_S3",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s3},{attribute:"DINCL_S4",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s4},{attribute:"DINCL_S5",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s5},{attribute:"DINCL_S6",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s6}]},{field:"DINCY",name:catchmentDefinitions.dincy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCY",label:catchmentDefinitions.dincy+" all sources"}]}],Group3_st=[{field:"SG3_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"SG3_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"SG3_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"SG3_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"SG3_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"SG3_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"SG3_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"SG3_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"SG3_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"SG3_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"SG3_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"SG3_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"SG3_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"SG3_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"SG3_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"SG3_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"SG3_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"SG3_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"SG3_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"SG3_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"SG3_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"SG3_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"SG3_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"SG3_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],Group2_st=[{field:"SG2_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"SG2_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"SG2_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"SG2_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"SG2_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"SG2_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"SG2_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"SG2_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"SG2_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"SG2_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"SG2_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"SG2_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"SG2_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"SG2_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"SG2_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"SG2_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"SG2_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"SG2_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"SG2_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"SG2_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"SG2_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"SG2_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"SG2_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"SG2_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],Group1_st=[{field:"SG1_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"SG1_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"SG1_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"SG1_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"SG1_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"SG1_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"SG1_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"SG1_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"SG1_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"SG1_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"SG1_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"SG1_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"SG1_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"SG1_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"SG1_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"SG1_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"SG1_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"SG1_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"SG1_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"SG1_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"SG1_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"SG1_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"SG1_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"SG1_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],Catchments_tn=[{field:"ACCL",name:catchmentDefinitions_tn.accl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCL_S1",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s1},{attribute:"ACCL_S2",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s2},{attribute:"ACCL_S3",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s3},{attribute:"ACCL_S4",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s4},{attribute:"ACCL_S5",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s5}]},{field:"INCL",name:catchmentDefinitions_tn.incl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCL_S1",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s1},{attribute:"INCL_S2",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s2},{attribute:"INCL_S3",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s3},{attribute:"INCL_S4",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s4},{attribute:"INCL_S5",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s5}]},{field:"ACCY",name:catchmentDefinitions_tn.accy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCY",label:catchmentDefinitions.accy+" all sources"}]},{field:"INCY",name:catchmentDefinitions_tn.incy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCY",label:catchmentDefinitions.incy+" all sources"}]},{field:"DACCL",name:catchmentDefinitions_tn.daccl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCL",label:catchmentDefinitions.daccl+" all sources"}]},{field:"DACCY",name:catchmentDefinitions_tn.daccy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCY",label:catchmentDefinitions.daccy+" all sources"}]},{field:"DINCL",name:catchmentDefinitions_tn.dincl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCL_S1",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s1},{attribute:"DINCL_S2",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s2},{attribute:"DINCL_S3",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s3},{attribute:"DINCL_S4",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s4},{attribute:"DINCL_S5",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s5}]},{field:"DINCY",name:catchmentDefinitions_tn.dincy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCY",label:catchmentDefinitions.dincy+" all sources"}]}],Group3_tn=[{field:"GP3_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"GP3_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"GP3_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"GP3_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"GP3_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"GP3_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"GP3_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"GP3_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"GP3_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"GP3_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"GP3_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"GP3_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"GP3_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"GP3_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"GP3_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"GP3_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"GP3_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"GP3_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"GP3_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"GP3_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],Group2_tn=[{field:"GP2_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"GP2_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"GP2_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"GP2_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"GP2_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"GP2_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"GP2_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"GP2_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"GP2_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"GP2_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"GP2_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"GP2_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"GP2_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"GP2_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"GP2_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"GP2_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"GP2_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"GP2_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"GP2_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"GP2_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],Group1_tn=[{field:"GP1_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"GP1_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"GP1_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"GP1_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"GP1_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"GP1_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"GP1_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"GP1_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"GP1_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"GP1_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"GP1_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"GP1_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"GP1_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"GP1_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"GP1_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"GP1_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"GP1_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"GP1_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"GP1_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"GP1_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],ST_tn=[{field:"ST_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"ST_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"ST_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"ST_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"ST_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"ST_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"ST_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"ST_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"ST_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"ST_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"ST_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"ST_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"ST_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"ST_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"ST_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"ST_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"ST_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"ST_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"ST_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"ST_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],Catchments_st_tn=[{field:"ACCL",name:catchmentDefinitions_tn.accl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCL_S1",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s1},{attribute:"ACCL_S2",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s2},{attribute:"ACCL_S3",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s3},{attribute:"ACCL_S4",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s4},{attribute:"ACCL_S5",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s5}]},{field:"INCL",name:catchmentDefinitions_tn.incl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCL_S1",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s1},{attribute:"INCL_S2",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s2},{attribute:"INCL_S3",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s3},{attribute:"INCL_S4",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s4},{attribute:"INCL_S5",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s5}]},{field:"ACCY",name:catchmentDefinitions_tn.accy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCY",label:catchmentDefinitions.accy+" all sources"}]},{field:"INCY",name:catchmentDefinitions_tn.incy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCY",label:catchmentDefinitions.incy+" all sources"}]},{field:"DACCL",name:catchmentDefinitions_tn.daccl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCL",label:catchmentDefinitions.daccl+" all sources"}]},{field:"DACCY",name:catchmentDefinitions_tn.daccy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCY",label:catchmentDefinitions.daccy+" all sources"}]},{field:"DINCL",name:catchmentDefinitions_tn.dincl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCL_S1",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s1},{attribute:"DINCL_S2",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s2},{attribute:"DINCL_S3",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s3},{attribute:"DINCL_S4",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s4},{attribute:"DINCL_S5",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s5}]},{field:"DINCY",name:catchmentDefinitions_tn.dincy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCY",label:catchmentDefinitions.dincy+" all sources"}]}],Group3_st_tn=[{field:"SG3_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"SG3_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"SG3_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"SG3_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"SG3_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"SG3_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"SG3_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"SG3_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"SG3_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"SG3_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"SG3_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"SG3_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"SG3_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"SG3_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"SG3_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"SG3_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"SG3_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"SG3_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"SG3_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"SG3_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],Group2_st_tn=[{field:"SG2_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"SG2_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"SG2_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"SG2_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"SG2_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"SG2_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"SG2_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"SG2_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"SG2_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"SG2_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"SG2_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"SG2_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"SG2_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"SG2_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"SG2_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"SG2_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"SG2_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"SG2_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"SG2_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"SG2_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],Group1_st_tn=[{field:"SG1_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"SG1_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"SG1_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"SG1_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"SG1_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"SG1_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"SG1_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"SG1_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"SG1_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"SG1_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"SG1_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"SG1_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"SG1_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"SG1_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"SG1_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"SG1_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"SG1_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"SG1_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"SG1_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"SG1_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],queryParameters={grp3:{idField:"GRP_3_NUM",nameField:["GRP_3_NAM","GRP_2_NAM","GRP_1_NAM","ST"],alias:"HUC10",serviceId:4,AOISelect:!1},grp2:{idField:"GRP_2_NUM",nameField:["GRP_2_NAM"],alias:"HUC8",serviceId:1,AOISelect:!0},grp1:{idField:"GRP_1_NUM",nameField:["GRP_1_NAM"],alias:"Independent Watershed",serviceId:2,AOISelect:!0},st:{idField:"ST",nameField:["ST"],alias:"State",serviceId:3,AOISelect:!0}},allLayers;require(["esri/geometry/Extent","esri/layers/WMSLayerInfo","esri/layers/FeatureLayer","esri/layers/ImageParameters","dojo/domReady!"],function(e,t,i,a){var n;n=1==$("#radio1")[0].checked?0:1,allLayers=[{groupHeading:"Nutrient Model",showGroupHeading:!0,includeInLayerList:!0,layers:{"Nutrient Model Results Overlay":{url:serviceBaseURL,visibleLayers:[n],options:{id:"SparrowRanking",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}}}},{groupHeading:"Model Calibration Sites",showGroupHeading:!0,includeInLayerList:!0,layers:{"Phosphorus Calibration Sites":{url:serviceBaseURL,visibleLayers:[18],options:{id:"phosCalibration",opacity:.85,visible:!1},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,zoomScale:144448,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!0}},"Nitrogen Calibration Sites":{url:serviceBaseURL,visibleLayers:[19],options:{id:"nitroCalibration",visible:!1,opacity:.85},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}}}},{groupHeading:"Auxilliary Layers",showGroupHeading:!0,includeInLayerList:!0,layers:{"Great Lakes Streams":{url:serviceBaseURL,visibleLayers:[20],options:{id:"streams",visible:!1,opacity:.6},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}},"Land Use 2012":{url:"https://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/lu2012_100515_test/ImageServer",options:{id:"lu2012",opacity:.5,visible:!1},wimOptions:{type:"layer",layerType:"agisImage",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}}}}]}),function(e){"object"==typeof module&&module.exports?module.exports=e:e(Highcharts)}(function(e){"use strict";function t(t,i,a,n,o){var r,l,p,c=(t.options.exporting||{}).csv||{},u=c.url||"http://www.highcharts.com/studies/csv-export/download.php";
p=t.options.exporting.filename?t.options.exporting.filename:t.title?t.title.textStr.replace(/ /g,"-").toLowerCase():"chart",window.Blob&&window.navigator.msSaveOrOpenBlob?(l=new Blob([n]),window.navigator.msSaveOrOpenBlob(l,p+"."+a)):s?(r=document.createElement("a"),r.href=i,r.target="_blank",r.download=p+"."+a,t.container.append(r),r.click(),r.remove()):e.post(u,{data:n,type:o,extension:a})}var i=e.each,a=e.pick,n=e.seriesTypes,s=void 0!==document.createElement("a").download;e.setOptions({lang:{downloadCSV:"Download CSV",downloadXLS:"Download XLS",viewData:"View data table"}}),e.Chart.prototype.getDataRows=function(){var t,n,s,o,r,l=(this.options.exporting||{}).csv||{},p=this.xAxis,c={},u=[],d=[],f=l.dateFormat||"%Y-%m-%d %H:%M:%S",b=l.columnHeaderFormatter||function(t,i,a){return t instanceof e.Axis?t.options.title&&t.options.title.text||(t.isDatetimeAxis?"DateTime":"Category"):t?t.name+(a>1?" ("+i+")":""):"Category"},h=[];s=0,i(this.series,function(t){var n,o=t.options.keys,r=o||t.pointArrayMap||["y"],l=r.length,u=t.requireSorting,f={},m=e.inArray(t.xAxis,p);if(i(r,function(e){f[e]=t[e+"Axis"]&&t[e+"Axis"].categories||[]}),t.options.includeInCSVExport!==!1&&t.visible!==!1){for(e.find(h,function(e){return e[0]===m})||h.push([m,s]),n=0;l>n;)d.push(b(t,r[n],r.length)),n+=1;i(t.points,function(e,i){var o,p,d=u?e.x:i;for(n=0,c[d]||(c[d]=[],c[d].xValues=[]),c[d].x=e.x,c[d].xValues[m]=e.x,t.xAxis&&"name"!==t.exportKey||(c[d].name=e.name);l>n;)o=r[n],p=e[o],c[d][s+n]=a(f[o][p],p),n+=1}),s+=n}});for(o in c)c.hasOwnProperty(o)&&u.push(c[o]);var m,D;for(n=[d],s=h.length;s--;)m=h[s][0],D=h[s][1],t=p[m],u.sort(function(e,t){return e.xValues[m]-t.xValues[m]}),r=b(t),n[0].splice(D,0,r),i(u,function(i){var n=i.name;n||(t.isDatetimeAxis?(i.x instanceof Date&&(i.x=i.x.getTime()),n=e.dateFormat(f,i.x)):n=t.categories?a(t.names[i.x],t.categories[i.x],i.x):i.x),i.splice(D,0,n)});return n=n.concat(u)},e.Chart.prototype.getCSV=function(e){var t="",a=this.getDataRows(),n=(this.options.exporting||{}).csv||{},s=n.itemDelimiter||",",o=n.lineDelimiter||"\n";return i(a,function(i,n){for(var r="",l=i.length,p=e?1.1.toLocaleString()[1]:".";l--;)r=i[l],"string"==typeof r&&(r='"'+r+'"'),"number"==typeof r&&","===p&&(r=r.toString().replace(".",",")),i[l]=r;t+=i.join(s),n<a.length-1&&(t+=o)}),t},e.Chart.prototype.getTable=function(e){var t="<table><thead>",a=this.getDataRows();return i(a,function(i,a){var n,s,o=a?"td":"th",r=e?1.1.toLocaleString()[1]:".";for(t+="<tr>",s=0;s<i.length;s+=1)n=i[s],"number"==typeof n?(n=n.toString(),","===r&&(n=n.replace(".",r)),t+="<"+o+' class="number">'+n+"</"+o+">"):t+="<"+o+">"+(void 0===n?"":n)+"</"+o+">";t+="</tr>",a||(t+="</thead><tbody>")}),t+="</tbody></table>"},e.Chart.prototype.downloadCSV=function(){var e=this.getCSV(!0);t(this,"data:text/csv,\ufeff"+encodeURIComponent(e),"csv",e,"text/csv")},e.Chart.prototype.downloadXLS=function(){var e="data:application/vnd.ms-excel;base64,",i='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Ark1</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--><style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";}</style><meta name=ProgId content=Excel.Sheet><meta charset=UTF-8></head><body>'+this.getTable(!0)+"</body></html>",a=function(e){return window.btoa(unescape(encodeURIComponent(e)))};t(this,e+a(i),"xls",i,"application/vnd.ms-excel")},e.Chart.prototype.viewData=function(){this.dataTableDiv||(this.dataTableDiv=document.createElement("div"),this.dataTableDiv.className="highcharts-data-table",this.renderTo.parentNode.insertBefore(this.dataTableDiv,this.renderTo.nextSibling)),this.dataTableDiv.innerHTML=this.getTable()},e.getOptions().exporting&&e.getOptions().exporting.buttons.contextButton.menuItems.push({textKey:"downloadCSV",onclick:function(){this.downloadCSV()}},{textKey:"downloadXLS",onclick:function(){this.downloadXLS()}},{textKey:"viewData",onclick:function(){this.viewData()}}),n.map&&(n.map.prototype.exportKey="name"),n.mapbubble&&(n.mapbubble.prototype.exportKey="name")});var app={};$(document).ready(function(){$("#page-loader").fadeOut(),$("#toast-fixed").fadeOut()}),require(["esri/arcgis/utils","esri/map","esri/tasks/QueryTask","esri/tasks/query","esri/Color","esri/dijit/HomeButton","esri/dijit/LocateButton","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/FeatureLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/WMSLayer","esri/dijit/Geocoder","esri/dijit/PopupTemplate","esri/graphic","esri/geometry/Extent","esri/geometry/Multipoint","esri/geometry/Point","esri/layers/LayerDrawingOptions","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/tasks/ClassBreaksDefinition","esri/tasks/AlgorithmicColorRamp","esri/tasks/GenerateRendererParameters","esri/tasks/GenerateRendererTask","esri/tasks/IdentifyTask","esri/tasks/IdentifyParameters","esri/tasks/ProjectParameters","esri/geometry/webMercatorUtils","esri/SpatialReference","dojo/parser","dojo/dnd/Moveable","dojo/query","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(e,t,i,a,n,s,o,r,l,p,c,u,d,f,b,h,m,D,S,g,_,y,A,G,L,v,C,I,O,P,w,k,x,T,Y,R,N){function M(e,t,i){var a;a=new esri.tasks.QueryTask(e);var n=new esri.tasks.Query;n.returnGeometry=!1,n.outFields=t,n.where=i,a.execute(n,E)}function E(e){$.each(e.features,function(e,t){K.push(t.attributes)}),F()}function F(){var e=te(K,"GP3"),t=te(K,"GP2"),i=te(K,"GP1"),a=te(K,"ST");$.each(e,function(e,t){" "!=t&&$("#grp3-select").append(new Option(t))}),$.each(t,function(e,t){" "!=t&&$("#grp2-select").append(new Option(t))}),$.each(i,function(e,t){" "!=t&&$("#grp1-select").append(new Option(t))}),$.each(a,function(e,t){$("#st-select").append(new Option(t))}),$("#grp3-select").selectpicker("refresh"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh"),$("#st-select").selectpicker("refresh")}function B(e){app.clearFindGraphics();var t=e.graphic?e.graphic:e.result.feature;t.setSymbol(ae)}function H(e){if(e=e.results,e.length>0){app.clearFindGraphics();for(var t=0;t<e.length;t++);var i=new D(e[0].feature.geometry);app.map.centerAndZoom(i,17)}}function W(e,t,i,a,n){return new g({angle:0,xoffset:t,yoffset:i,type:"esriPMS",url:e,contentType:"image/png",width:a,height:n})}function z(e){switch(e){case 0:return $("#st-select")[0].selectedIndex>0?"ST_MRB_ID":"MRB_ID";case 1:return $("#st-select")[0].selectedIndex>0?"SG3":"GP3";case 2:return $("#st-select")[0].selectedIndex>0?"SG2":"GP2";case 3:return $("#st-select")[0].selectedIndex>0?"SG1":"GP1";case 4:return"ST"}}function j(e){function t(){var e=$("#groupResultsSelect")[0].selectedIndex;switch(e){case 0:return"Catchment ID";case 1:return"HUC8";case 2:return"Tributary";case 3:return"Main River Basin";case 4:return"State"}}function i(){var e,t=app.map.getLayer("SparrowRanking").visibleLayers[0],i=app.getLayerConfigObject(t);return $.each(i,function(t,i){i.field==$("#displayedMetricSelect").val()&&(e=i.name)}),e}var a=[],s=[],o=[],r=[],l=[],p=[];$.each(e.features,function(e,t){p.push($.extend(!0,{},t.attributes)),$.map(Object.keys(t.attributes),function(e,i){e.indexOf("AREA")>-1&&delete t.attributes[e]}),l.push(t.attributes)});var c=0;$.each(l,function(e,t){$.each(t,function(e,t){"string"!==jQuery.type(t)&&"MRB_ID"!==e&&(c+=t)}),t.total=c,p[e].total=c,c=0}),l.sort(function(e,t){return parseFloat(t.total)-parseFloat(e.total)}),console.log("featureSort",l),$.each(e.features[0].attributes,function(e,t){s.push(e)}),s.pop(),$.each(s,function(e,t){var i=[];$.each(l,function(e,a){0==$("#groupResultsSelect")[0].selectedIndex?i.push({y:a[t],id:a.MRB_ID||a.ST_MRB_ID}):i.push(a[t])}),o.push(i)}),0==$("#groupResultsSelect")[0].selectedIndex&&o.pop(),s.shift(),$.each(o.shift(),function(e,t){void 0!==t.y?a.push(t.y):a.push(t)});var u=app.map.getLayer("SparrowRanking").visibleLayers[0],d=getChartOutfields(u),f=[];$.each(d,function(e,t){f.push(t.label)}),J=p,ee=[],$.each(f,function(e,t){ee.push(t)}),(0==u||8==u)&&(ee[0]="Name"),V(J,ee),f.shift(),$.each(f,function(e,t){r.push({name:t,turboThreshold:3e3})}),$.each(o,function(e,t){r[e].data=o[e]}),$("#chartWindowDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1,draggable:!0,minWidth:800,minHeight:800,maxHeight:1e3}),$("#chartWindowDiv").addClass("chartWindowMaximize"),$("#chartWindowDiv").removeClass("chartWindowMinimize"),$("#chartWindowDiv").css("visibility","visible"),$("#toast-fixed").fadeOut(),$("#toast-fixed").css("opacity","0"),"radio1"==$('.radio input[type="radio"]:checked')[0].id?($("#chartWindowPanelTitle").text("Total Phosphorus "+i()),console.log("Radio One")):($("#chartWindowPanelTitle").text("Total Nitrogen "+i()),console.log("Radio Two")),(e.features.length<=1||app.customChartClicked)&&($("#chartWindowPanelTitle").append('<br/><div class=""><button type="button" class="btn-blue" id="popupChartButton"><span class="glyphicon glyphicon-signal"></span> Show Full Chart</button></div>'),app.customChartClicked&&(app.customChartClicked=!1)),0==$("#chartClose").length&&$("#chartWindowDiv .dropdown").prepend('<div id="chartClose" title="close"><b>X</b></div>'),$("#popupChartButton").on("click",function(){app.formattedHighlightString="",app.map.graphics.clear(),app.createChartQuery()});var b=$("#chartWindowDiv").data("lobiPanel");b.unpin();var h=b.getPosition().x;b.setPosition(h,50),$("#chartClose").on("click",function(){app.map.graphics.clear(),app.formattedHighlightString="",$("#chartWindowDiv").css("visibility","hidden"),$("#chartWindowContainer").empty(),$("#chartWindowPanelTitle").empty()}),$("#chartWindowDiv").resize(function(){var e=$("#chartWindowDiv").height(),t=$("#chartWindowDiv").width();$("#chartWindowContainer").highcharts().setSize(t-50,e-105,!0)});var m="radio1"==$('.radio input[type="radio"]:checked')[0].id?phosColors:nitroColors;$("#chartWindowContainer").highcharts();$(function(){Highcharts.setOptions({lang:{thousandsSep:","},colors:m});Highcharts.getOptions().exporting.buttons.contextButton.menuItems;$("#chartWindowContainer").highcharts({chart:{type:"column",zoomType:"x",backgroundColor:"rgba(255, 255, 255, 0.45)",events:{selection:function(e){function t(e){$.each(app.map.graphics.graphics,function(e,t){"zoomhighlight"==t.symbol.id&&app.map.graphics.remove(t)}),$.each(e.features,function(e,t){var t=t,i=new _(_.STYLE_SOLID,new n([255,255,0]),1);i.id="zoomHighlight",t.setSymbol(i),app.map.graphics.add(t)})}function t(e){$.each(app.map.graphics.graphics,function(e,t){"zoomhighlight"==t.symbol.id&&app.map.graphics.remove(t)}),$.each(e.features,function(e,t){var t=t,i=new _(_.STYLE_SOLID,new n([255,255,0]),1);i.id="zoomHighlight",t.setSymbol(i),app.map.graphics.add(t)})}var i=[];if(e.xAxis){var a=e.xAxis[0];a&&($.each(this.series,function(e,t){$.each(t.points,function(e,t){if(t.x>=a.min&&t.x<=a.max){var n;n=0==$("#groupResultsSelect")[0].selectedIndex?t.id:t.category,-1==i.indexOf(n)&&i.push(n)}})}),U(i)),console.log(i)}app.map.graphics.clear();var s,o=app.map.getLayer("SparrowRanking").visibleLayers[0],r=app.map.getLayer("SparrowRanking").url,l=z($("#groupResultsSelect")[0].selectedIndex);s=new esri.tasks.QueryTask(r+o.toString());var p=new esri.tasks.Query;if(p.returnGeometry=!0,p.outSpatialReference=app.map.spatialReference,p.outFields=[l],1!=e.resetSelection){var c="";$.each(i,function(e,t){c+="MRB_ID"==l?+t+", ":"'"+t+"', "});var u=c.slice(0,c.length-2);p.where=l+" IN ("+u+")",s.execute(p,t)}else app.formattedHighlightString&&(p.where=app.formattedHighlightString,s.execute(p,t)),U()}}},title:{text:null},subtitle:{text:null},exporting:{enabled:!0,chartOptions:{chart:{events:{load:function(){this.chartBackground.attr({fill:"rgba(255, 255, 255, 1.0)"}),this.renderer.image("http://wim.usgs.gov/visuals/usgs/usgslogo1.jpg",2,2,50,30).add()}}}},buttons:{contextButton:{text:"Chart Options",height:40,symbol:null,align:"right",menuItems:[{text:"Download PNG",onclick:function(){this.exportChart({type:"PNG"})}},{text:"Download CSV",onclick:function(){this.downloadCSV()}},{text:"Download Excel",onclick:function(){this.downloadXLS()}},{text:"Change Background Transparency",onclick:function(){"rgba"!=this.chartBackground.element.attributes.fill.value.substring(0,4)?this.chartBackground.attr({fill:"rgba(255, 255, 255, .45)"}):this.chartBackground.attr({fill:"rgb(255, 255, 255)"})}}]}}},xAxis:{categories:a,title:{text:"Ranked by "+t()}},yAxis:{min:0,title:{text:i()},stackLabels:{enabled:!1,style:{fontWeight:"bold",color:Highcharts.theme&&Highcharts.theme.textColor||"gray"}}},legend:{align:"left",x:10,verticalAlign:"top",y:25,floating:!1,padding:5,backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"white",borderColor:"#CCC",borderWidth:1,shadow:!1,labelFormatter:function(){var e=this.name.indexOf(")"),t="";return t=e>-1?this.name.substring(e+1):this.name}},tooltip:{formatter:function(){var e=this.point.index+1,a=this.point.y/this.point.stackTotal*100;return"<b>"+t()+": <b>"+this.point.category+"</b></b><br/>"+this.series.name+": <b>"+this.point.y.toFixed(2)+" ("+a.toFixed(2)+"%)</b></b><br/>"+i()+" Total: <b>"+this.point.stackTotal.toFixed(2)+"</b></b><br/>Rank: <b>"+e+"</b>"}},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!1,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"}},series:{point:{events:{mouseOver:function(){function e(e){$.each(app.map.graphics.graphics,function(e,t){void 0==t.symbol.id&&app.map.graphics.remove(t)});var t=e.features[0],i=new y(y.STYLE_SOLID,new _(_.STYLE_SOLID,new n([150,49,37]),2),new n([150,49,37,.33]));t.setSymbol(i),app.map.graphics.add(t)}var t,i=0==$("#groupResultsSelect")[0].selectedIndex?this.id:this.category,a=app.map.getLayer("SparrowRanking").visibleLayers[0],s=app.map.getLayer("SparrowRanking").url,o=z($("#groupResultsSelect")[0].selectedIndex);t=new esri.tasks.QueryTask(s+a.toString());var r=new esri.tasks.Query;r.returnGeometry=!0,r.outSpatialReference=app.map.spatialReference,r.outFields=[o],"MRB_ID"!=o?r.where=o+"= '"+i+"'":r.where=o+" = "+i,t.execute(r,e)},click:function(e){var t,i=z($("#groupResultsSelect")[0].selectedIndex);if(t=0==$("#groupResultsSelect")[0].selectedIndex?this.id:this.category,"MRB_ID"!=i)var a=i+" = '"+t+"'";else var a=i+" = "+t;app.map.graphics.clear(),app.createChartQuery(a)}}}}},credits:{enabled:!1},series:r}),$(".highcharts-button-box").click(function(){$.each(app.map.graphics.graphics,function(e,t){"zoomhighlight"==t.symbol.id&&app.map.graphics.remove(t)})})});var D=$("#chartWindowDiv").height()-65,S=$("#chartWindowDiv").width();$("#chartWindowContainer").highcharts().setSize(S-50,D-105,!0)}function U(e){if(void 0!==e){var t=z($("#groupResultsSelect")[0].selectedIndex),i=[];$.each(e,function(e,a){i.push(J.filter(function(e){return e[t]==a})[0])}),V(i,ee)}else V(J,ee)}function V(e,t){$("#resultsTable").empty();var i=[];$("#resultsTable").addClass("hover-highlight"),$("#resultsTable").append("<thead></thead>"),$.each(t,function(e,t){var a=t.indexOf(")"),n="";n=a>-1?t.substring(a+1):t,i.push(n)});var a=$("#groupResultsSelect")[0].selectedIndex;0==a?(i.push("Total"),i.push("Catchment Area"),i.push("Upstream Area")):(i.push("Total"),i.push("Area"));var n=[];n.push("<tr>"),$.each(i,function(e,t){console.log(t),n.push("<th>"+t+"</th>")}),n.push("</tr>"),$("#resultsTable").find("thead").html(n.join(""));var s=[];$("#resultsTable").append('<tbody id="tableBody"></tbody>'),$.each(e,function(e,t){var i=0==a?t.MRB_ID||t.ST_MRB_ID:e;s.push("<tr id='row"+i+"'>"),$.each(t,function(e,t){"MRB_ID"!==e&&"ST_MRB_ID"!==e&&s.push("<td>"+t+"</td>")}),s.push("</tr>")}),$("#tableBody").html(s.join("")),$(".tablesorter").trigger("updateAll"),$(".tablesorter").tablesorter({widthFixed:!0,onRenderHeader:function(){var e="radio1"==$('.radio input[type="radio"]:checked')[0].id?phosColors:nitroColors;if(this.context.cellIndex>0){var t=this.context.cellIndex-1;this.append('<div style="background:'+e[t]+';height: 3px;margin-bottom:2px;"></div>')}}})}function Q(){$("#geosearchModal").modal("show")}function Z(){$("#aboutModal").modal("show")}function q(){$("#userGuideModal").modal("show")}k.parse(),app.dragInfoWindows=!0,app.clickSelectionActive=!1,app.drawSelectionActive=!1,app.userSelectedDispFieldName="",app.userSelectedShapes=[],app.customChartClicked=!1,app.shiftKey=!1,app.formattedHighlightString,app.defaultMapCenter=mapCenter,app.defaultZoom=defaultZoomLevel,app.map=t("mapDiv",{basemap:"gray",center:app.defaultMapCenter,zoom:app.defaultZoom}),app.home=new s({map:app.map},"homeButton"),app.home.startup(),app.locate=new o({map:app.map},"locateButton"),app.locate.startup(),app.geocoder=new d({value:"",maxLocations:25,autoComplete:!0,arcgisGeocoder:!0,autoNavigate:!1,map:app.map},"geosearch"),app.geocoder.startup(),app.geocoder.on("select",B),app.geocoder.on("findResults",H),app.geocoder.on("clear",app.clearFindGraphics),search_api.create("geosearch_usgs",{on_result:function(e){var t=["GNIS_MAJOR","GNIS_MINOR","ZIPCODE","AREACODE"],i=t.indexOf(e.result.properties.Source);-1==i?app.map.setExtent(new esri.geometry.Extent({xmin:e.result.properties.LonMin,ymin:e.result.properties.LatMin,xmax:e.result.properties.LonMax,ymax:e.result.properties.LatMax,spatialReference:{wkid:4326}}),!0):app.map.centerAndZoom(new D(e.result.properties.Lon,e.result.properties.Lat),12),app.map.infoWindow.setTitle("Search Result"),app.map.infoWindow.setContent($.map(Object.keys(e.result.properties),function(t){return"<b>"+t+": </b>"+e.result.properties[t]}).join("<br/>")),$("#geosearchModal").modal("hide"),app.map.infoWindow.show(new D(e.result.properties.Lon,e.result.properties.Lat))},include_usgs_sw:!0,include_huc2:!0,include_huc4:!0,include_huc6:!0,include_huc8:!0,include_huc12:!0});var X={},K=[],J=[],ee=[];loadEventHandlers(),M(serviceBaseURL+5,["ST","GP3","GP2","GP1"],"1=1"),app.setLayerDefObj=function(e){switch(e.selectedId){case"st-select":X.AOIST=e.selectedValue;break;case"grp1-select":X.AOI1=e.selectedValue;break;case"grp2-select":X.AOI2=e.selectedValue;break;case"grp3-select":X.AOI3=e.selectedValue}app.updateAOIs(e.selectedId)},app.getLayerDefObj=function(){return X},app.clearLayerDefObj=function(){X={},$("#st-select").empty(),$("#grp1-select").empty(),$("#grp2-select").empty(),$("#grp3-select").empty(),F()},app.clearOneLayerDefObj=function(e){switch(e){case"AOIST":X.AOIST=void 0,app.updateAOIs("grp1-select"),app.updateAOIs("grp2-select"),app.updateAOIs("grp3-select");break;case"AOI1":X.AOI1=void 0,app.updateAOIs("st-select"),app.updateAOIs("grp2-select"),app.updateAOIs("grp3-select");break;case"AOI2":X.AOI2=void 0,app.updateAOIs("grp1-select"),app.updateAOIs("grp3-select"),app.updateAOIs("st-select");break;case"AOI3":X.AOI3=void 0,app.updateAOIs("grp1-select"),app.updateAOIs("grp2-select"),app.updateAOIs("st-select")}};var te=function(e,t){var i=[];for(var a in e)i.map(function(e){return e}).indexOf(e[a][t])<0&&i.push(e[a][t]);return i.sort()};app.updateAOIs=function(e){var t=[],i=[],a=[],n=[],s=[];switch(e){case"st-select":X.AOI2?($("#grp1-select").empty(),$("#grp3-select").empty(),t=K.filter(function(e){return e.ST===X.AOIST&&e.GP2===X.AOI2})):($("#grp1-select").empty(),$("#grp3-select").empty(),t=K.filter(function(e){return e.ST===X.AOIST})),0===t.length&&(t=K),n=te(t,"GP1"),i=te(t,"GP3"),ie(n,"#grp1-select","AOI1",i,"#grp3-select","AOI3"),t=[],X.AOI1?($("#grp2-select").empty(),$("#grp3-select").empty(),t=K.filter(function(e){return e.ST===X.AOIST&&e.GP1===X.AOI1})):($("#grp2-select").empty(),$("#grp3-select").empty(),t=K.filter(function(e){return e.ST===X.AOIST})),0===t.length&&(t=K),a=te(t,"GP2"),i=te(t,"GP3"),ie(a,"#grp2-select","AOI2",i,"#grp3-select","AOI3"),t=[],X.AOI3?($("#grp1-select").empty(),$("#grp2-select").empty(),t=K.filter(function(e){return e.ST===X.AOIST&&e.GP3===X.AOI3})):($("#grp1-select").empty(),$("#grp2-select").empty(),t=K.filter(function(e){return e.ST===X.AOIST})),0===t.length&&(t=K),n=te(t,"GP1"),a=te(t,"GP2"),ie(n,"#grp1-select","AOI1",a,"#grp2-select","AOI2");break;case"grp1-select":X.AOI2?($("#st-select").empty(),$("#grp3-select").empty(),t=K.filter(function(e){return e.GP2===X.AOI2&&e.GP1===X.AOI1})):($("#st-select").empty(),$("#grp3-select").empty(),t=K.filter(function(e){return e.GP1===X.AOI1})),0===t.length&&(t=K),s=te(t,"ST"),i=te(t,"GP3"),ie(s,"#st-select","AOIST",i,"#grp3-select","AOI3"),t=[],X.AOIST?($("#grp2-select").empty(),$("#grp3-select").empty(),t=K.filter(function(e){return e.GP1==X.AOI1&&e.ST==X.AOIST})):($("#grp2-select").empty(),$("#grp3-select").empty(),t=K.filter(function(e){return e.GP1==X.AOI1})),0==t.length&&(t=K),a=te(t,"GP2"),i=te(t,"GP3"),ie(a,"#grp2-select","AOI2",i,"#grp3-select","AOI3"),t=[],X.AOI3?($("#grp2-select").empty(),$("#st-select").empty(),t=K.filter(function(e){return e.GP1===X.AOI1&&e.GP3===X.AOI3})):($("#grp2-select").empty(),$("#st-select").empty(),t=K.filter(function(e){return e.GP1===X.AOI1})),0===t.length&&(t=K),a=te(t,"GP2"),s=te(t,"ST"),ie(a,"#grp2-select","AOI2",s,"#st-select","AOIST");break;case"grp2-select":X.AOIST?($("#grp1-select").empty(),$("#grp3-select").empty(),t=K.filter(function(e){return e.GP2===X.AOI2&&e.ST===X.AOIST})):($("#grp1-select").empty(),$("#grp3-select").empty(),t=K.filter(function(e){return e.GP2===X.AOI2})),0===t.length&&(t=K),n=te(t,"GP1"),i=te(t,"GP3"),ie(n,"#grp1-select","AOI1",i,"#grp3-select","AOI3"),t=[],X.AOI1?($("#st-select").empty(),$("#grp3-select").empty(),t=K.filter(function(e){return e.GP2===X.AOI2&&e.GP1===X.AOI1})):($("#st-select").empty(),$("#grp3-select").empty(),t=K.filter(function(e){return e.GP2===X.AOI2})),0==t.length&&(t=K),s=te(t,"ST"),i=te(t,"GP3"),ie(s,"#st-select","AOIST",i,"#grp3-select","AOI3"),t=[],X.AOI3?($("#st-select").empty(),$("#grp1-select").empty(),t=K.filter(function(e){return e.GP2===X.AOI2&&e.GP3===X.AOI3})):($("#st-select").empty(),$("#grp1-select").empty(),t=K.filter(function(e){return e.GP2===X.AOI2})),0===t.length&&(t=K),n=te(t,"GP1"),s=te(t,"ST"),ie(n,"#grp1-select","AOI1",s,"#st-select","AOIST");break;case"grp3-select":X.AOIST?($("#grp1-select").empty(),$("#grp2-select").empty(),t=K.filter(function(e){return e.GP3===X.AOI3&&e.ST===X.AOIST})):($("#grp1-select").empty(),$("#grp2-select").empty(),t=K.filter(function(e){return e.GP3===X.AOI3})),0===t.length&&(t=K),n=te(t,"GP1"),a=te(t,"GP2"),ie(n,"#grp1-select","AOI1",a,"#grp2-select","AOI2"),t=[],X.AOI1?($("#st-select").empty(),$("#grp2-select").empty(),t=K.filter(function(e){return e.GP3===X.AOI3&&e.GP1===X.AOI1})):($("#st-select").empty(),$("#grp2-select").empty(),t=K.filter(function(e){return e.GP3===X.AOI3})),0==t.length&&(t=K),s=te(t,"ST"),a=te(t,"GP2"),ie(s,"#st-select","AOIST",a,"#grp2-select","AOI2"),t=[],X.AOI2?($("#st-select").empty(),$("#grp1-select").empty(),t=K.filter(function(e){return e.GP3===X.AOI3&&e.GP2===X.AOI2})):($("#st-select").empty(),$("#grp1-select").empty(),t=K.filter(function(e){return e.GP3===X.AOI3})),0===t.length&&(t=K),n=te(t,"GP1"),s=te(t,"ST"),ie(n,"#grp1-select","AOI1",s,"#st-select","AOIST")}};var ie=function(e,t,i,a,n,s){$.each(e,function(e,i){$(t).append(new Option(i))}),$(t).selectpicker("refresh"),$.each(a,function(e,t){$(n).append(new Option(t))}),$(n).selectpicker("refresh"),X[i]&&$(t).selectpicker("val",X[i]),X[s]&&$(n).selectpicker("val",X[s])};app.initMapScale=function(){var e=app.map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e);var t=P.webMercatorToGeographic(app.map.extent.getCenter());$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))},app.updateMousePosition=function(e){if($("#mapCenterLabel").css("display","none"),null!==e.mapPoint){var t=P.webMercatorToGeographic(e.mapPoint);$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))}},app.updateMapCenter=function(e){$("#mapCenterLabel").css("display","inline");var t=P.webMercatorToGeographic(e.getCenter());$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))},app.setupDraggableInfoWindow=function(){if(app.dragInfoWindows===!0){var e=T(".title",app.map.infoWindow.domNode)[0],t=new x(app.map.infoWindow.domNode,{handle:e});N(t,"FirstMove",function(){var e=T(".outerPointer",app.map.infoWindow.domNode)[0];R.add(e,"hidden");var t=T(".pointer",app.map.infoWindow.domNode)[0];R.add(t,"hidden")}.bind(this))}},app.executeIdentifyTask=function(e){app.shiftKey=e.shiftKey,console.log(e);var t=app.map.getLayer("SparrowRanking").visibleLayers[0];app.identifyParams.layerIds=[t];var i,a,s=app.map.getLayersVisibleAtScale();for(i in s)"nitroCalibration"===s[i].id&&app.map.getLayer("nitroCalibration").visible===!0&&(a=app.map.getLayer("nitroCalibration").visibleLayers[0],app.identifyParams.layerIds.push(a)),"phosCalibration"===s[i].id&&app.map.getLayer("phosCalibration").visible===!0&&(a=app.map.getLayer("phosCalibration").visibleLayers[0],app.identifyParams.layerIds.push(a));app.identifyParams.geometry=e.mapPoint,app.identifyParams.mapExtent=app.map.extent;app.identifyTask.execute(app.identifyParams).addCallback(function(t){if(app.clickSelectionActive)$.each(t,function(e,t){var i=t.feature,a="MRB_ID"==t.displayFieldName?t.value:"'"+t.value+"'";if(app.shiftKey){var s=app.map.graphics.graphics.filter(function(e){return e.symbol.id==t.value})[0];app.map.graphics.remove(s),app.userSelectedShapes.splice(app.userSelectedShapes.indexOf(a),1)}else{var o=new _(_.STYLE_SOLID,new n([255,255,0]),1);o.id=t.value,i.setSymbol(o),app.map.graphics.add(i),app.userSelectedShapes.push(a),""==app.userSelectedDispFieldName&&(app.userSelectedDispFieldName=t.displayFieldName)}});else{var i=!1;if(app.map.graphics.clear(),t.length>=1&&($.each(t,function(t,a){if(18===a.layerId){var n="Phosphorus",s=new esri.InfoTemplate;s.setTitle("SPARROW "+n+" Calibration Site"),s.setContent("<div><b>Station Name:</b> "+a.feature.attributes.NAME+"</div><br><div><b>Station ID:</b> </b>"+a.feature.attributes.STATION_ID+"</div><br><div><b>SPARROW Reach ID: </b>"+a.feature.attributes.MRB_ID+"</div><br><div><b>Fluxmaster Load"+chartUnits+": </b>"+a.feature.attributes.FLUXMASTER+"</div><br><div><b>SPARROW Estimated Load "+chartUnits+": </b>"+a.feature.attributes.SPARROW_ES+"</div><br>");new b;a.feature.setInfoTemplate(s),app.map.infoWindow.setFeatures([a.feature]),app.map.infoWindow.show(e.mapPoint),i=!0}if(19===a.layerId){var o="Nitrogen",r=new esri.InfoTemplate;r.setTitle("SPARROW "+o+" Calibration Site"),r.setContent("<div><b>Station Name:</b> "+a.feature.attributes.NAME+"</div><br><div><b>Station ID:</b> </b>"+a.feature.attributes.STATION_ID+"</div><br><div><b>SPARROW Reach ID: </b>"+a.feature.attributes.MRB_ID+"</div><br><div><b>Fluxmaster Load"+chartUnits+": </b>"+a.feature.attributes.FLUXMASTER+"</div><br><div><b>SPARROW Estimated Load "+chartUnits+": </b>"+a.feature.attributes.SPARROW_ES+"</div><br>");new b;a.feature.setInfoTemplate(r),app.map.infoWindow.setFeatures([a.feature]),app.map.infoWindow.show(e.mapPoint),i=!0}}),1!=i)){var a=new _(_.STYLE_SOLID,new n([255,255,0]),1);a.id=t[0].value,t[0].feature.setSymbol(a),app.map.graphics.add(t[0].feature);var s=getChartOutfields(app.map.getLayer("SparrowRanking").visibleLayers[0]);t[0].feature.attributes;if("MRB_ID"==t[0].displayFieldName)var o=t[0].displayFieldName+" = "+t[0].value;else var o=t[0].displayFieldName+" = '"+t[0].value+"'";$.each(s,function(e,t){console.log(t.attribute)}),app.createChartQuery(o)}}})},app.clearFindGraphics=function(){app.map.infoWindow.hide(),app.map.graphics.clear()},app.createTableQuery=function(){$("#resultsTable").empty();var e,t=app.map.getLayer("SparrowRanking").visibleLayers[0];if(app.map.getLayer("SparrowRanking").layerDefinitions)var i=app.map.getLayer("SparrowRanking").layerDefinitions[t];else var i="1=1";var a=serviceBaseURL+t;e=new esri.tasks.QueryTask(a);var n=new esri.tasks.Query;n.returnGeometry=!1,n.outFields=["*"],n.where=i},app.createChartQuery=function(e){$("#toast_body").html("Chart is loading"),$("#toast-fixed").fadeIn(),$("#toast-fixed").css("opacity","1"),$("#chartContainer").empty(),console.log("creating chart query");var t,i=app.map.getLayer("SparrowRanking").visibleLayers[0];if(void 0==e)if(app.map.getLayer("SparrowRanking").layerDefinitions)var a=app.map.getLayer("SparrowRanking").layerDefinitions[i];else var a="1=1";else var a=e;var n=serviceBaseURL+i;t=new esri.tasks.QueryTask(n);var s=getChartOutfields(i),o=[];$.each(s,function(e,t){o.push(t.attribute)});var r=new esri.tasks.Query;r.returnGeometry=!1,r.outFields=getExtraOutfields(o,i),r.where=a,t.execute(r,j)},app.getLayerConfigObject=function(e){var t=function(e){switch(e){case 0:return Catchments;case 1:return Group3;case 2:return Group2;case 3:return Group1;case 4:return ST;case 5:return Catchments_st;case 6:return Group3_st;case 7:return Group2_st;case 8:return Group1_st;case 9:return Catchments_tn;case 10:return Group3_tn;case 11:return Group2_tn;case 12:return Group1_tn;case 13:return ST_tn;case 14:return Catchments_st_tn;case 15:return Group3_st_tn;case 16:return Group2_st_tn;case 17:return Group1_st_tn}}(e);return t};var ae=W("../images/purple-pin.png",0,12,13,24);new y(y.STYLE_SOLID,new _(_.STYLE_DASHDOT,new n([255,0,0]),2),new n([255,255,0,.5]));$(document).on("mouseenter","#tableBody tr",function(e){function t(e){$.each(app.map.graphics.graphics,function(e,t){void 0==t.symbol.id&&app.map.graphics.remove(t)});var t=e.features[0],i=new y(y.STYLE_SOLID,new _(_.STYLE_SOLID,new n([150,49,37]),2),new n([150,49,37,.33]));t.setSymbol(i),app.map.graphics.add(t)}var i,a=0==$("#groupResultsSelect")[0].selectedIndex?e.currentTarget.id.substring(3):e.currentTarget.cells[0].innerHTML,s=app.map.getLayer("SparrowRanking").visibleLayers[0],o=app.map.getLayer("SparrowRanking").url,r=z($("#groupResultsSelect")[0].selectedIndex);i=new esri.tasks.QueryTask(o+s.toString());var l=new esri.tasks.Query;l.returnGeometry=!0,l.outSpatialReference=app.map.spatialReference,l.outFields=[r],"MRB_ID"==r?l.where=r+" = "+a:l.where=r+"= '"+a+"'",i.execute(l,t)}),$("#geosearchNav").click(function(){Q()}),$("#aboutNav").click(function(){Z()}),$("#userGuideNav").click(function(){q()}),$("#html").niceScroll(),$("#sidebar").niceScroll(),$("#sidebar").scroll(function(){$("#sidebar").getNiceScroll().resize()}),$("#legendDiv").niceScroll(),app.maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",app.maxLegendHeight),$("#legendCollapse").on("shown.bs.collapse",function(){app.maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",app.maxLegendHeight),app.maxLegendDivHeight=$("#legendElement").height()-parseInt($("#legendHeading").css("height").replace("px","")),$("#legendDiv").css("max-height",app.maxLegendDivHeight)}),$("#legendCollapse").on("hide.bs.collapse",function(){$("#legendElement").css("height","initial")}),require(["dijit/form/CheckBox"],function(e){function t(e,t,i,a,n,s){if(app.map.addLayer(i),i.visible&&void 0!==s.hasOpacitySlider&&1==s.hasOpacitySlider&&void 0!==s.hasZoomto&&1==s.hasZoomto)var o=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+i.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span><span class="glyphicon glyphicon-search pull-right zoomto"></span></button></div>');else if(i.visible||void 0===s.hasOpacitySlider||1!=s.hasOpacitySlider||void 0===s.hasZoomto||1!=s.hasZoomto){if(i.visible&&void 0!==s.hasOpacitySlider&&1==s.hasOpacitySlider&&void 0!==s.hasZoomto&&0==s.hasZoomto)var o=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+i.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span></button></div>');else if(!i.visible&&void 0!==s.hasOpacitySlider&&1==s.hasOpacitySlider&&void 0!==s.hasZoomto&&0==s.hasZoomto)var o=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+i.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span></button></div>');
}else var o=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+i.id+'"type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span><span class="glyphicon glyphicon-search pull-right zoomto"></span></button></div>');if(o.click(function(e){if($(this).find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$(this).find("button").button("toggle"),e.preventDefault(),e.stopPropagation(),$("#"+camelize(a)).toggle(),i.visible){i.setVisibility(!1);var t=[];$.each(app.legend.layerInfos,function(e,i){t.push(i.layer.id)});var n=t.indexOf(i.id);n>-1&&app.legend.layerInfos.splice(n,1),app.legend.refresh()}else i.setVisibility(!0),app.legend.layerInfos.push({layer:i,title:e.currentTarget.innerText}),app.legend.refresh()}),t){var r=camelize(e);if(!$("#"+r).length){var l=$('<div id="'+r+'"><div class="alert alert-info" role="alert"><strong>'+e+"</strong></div></div>");$("#toggle").append(l)}$("#"+r).append(o),$("#opacity"+camelize(a)).length>0&&$("#opacity"+camelize(a)).hover(function(){$(".opacitySlider").remove();var e=app.map.getLayer(n.id).opacity,t=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+e+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(t),$("#slider")[0].value=100*e,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var t=$("#slider")[0].value/100;console.log("o: "+t),$("#opacityValue").html("Opacity: "+t),app.map.getLayer(n.id).setOpacity(t)})}),$(".zoomto").hover(function(e){$(".zoomDialog").remove();var t=$('<div class="zoomDialog"><label class="zoomClose pull-right">X</label><br><div class="list-group"><a href="#" id="zoomscale" class="list-group-item lgi-zoom zoomscale">Zoom to scale</a> <a id="zoomcenter" href="#" class="list-group-item lgi-zoom zoomcenter">Zoom to center</a><a id="zoomextent" href="#" class="list-group-item lgi-zoom zoomextent">Zoom to extent</a></div></div>');$("body").append(t),$(".zoomDialog").css("left",e.clientX-80),$(".zoomDialog").css("top",e.clientY-5),$(".zoomDialog").mouseleave(function(){$(".zoomDialog").remove()}),$(".zoomClose").click(function(){$(".zoomDialog").remove()}),$("#zoomscale").click(function(e,t){var i=app.map.getLayer("SparrowRanking").minScale;i>0?app.map.setScale(i):console.log("No minimum scale for layer.")}),$("#zoomcenter").click(function(e,t){var i=app.map.getLayer("SparrowRanking").fullExtent.getCenter(),a=new D(i.x,i.y,new w({wkid:4326}));app.map.centerAt(a)}),$("#zoomextent")&&$("#zoomextent").click(function(e,t){var i=app.map.getLayer("SparrowRanking").fullExtent,a=new O;a.outSR=new w(102100),a.geometries=[i],geomService.project(a,function(e){var t=e[0];map.setExtent(t,new w({wkid:102100}))})})})}}$.each(allLayers,function(e,i){$.each(i.layers,function(e,a){if("agisImage"===a.wimOptions.layerType){var n=new c(a.url,a.options);a.wimOptions&&1==a.wimOptions.includeLegend&&legendLayers.push({layer:n,title:legendLayerName}),a.visibleLayers&&n.setVisibleLayers(a.visibleLayers),t(i.groupHeading,i.showGroupHeading,n,e,a.options,a.wimOptions)}else{var n=new l(a.url,a.options);a.visibleLayers&&n.setVisibleLayers(a.visibleLayers),t(i.groupHeading,i.showGroupHeading,n,e,a.options,a.wimOptions)}})})})}),$(".selectpicker").selectpicker();