function addCommas(e){e+="";for(var i=e.split("."),t=i[0],a=i.length>1?"."+i[1]:"",n=/(\d+)(\d{3})/;n.test(t);)t=t.replace(n,"$1,$2");return t+a}function camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,i){return 0==i?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}function loadEventHandlers(){function e(e,i,t,a,n){$("#clear_btn").append("<a class='"+e+"' data-toggle='tooltip' data-placement='top' title='Cannot show "+i+" Area of Interest while grouping by "+t+".'><span class='glyphicon glyphicon-warning-sign'></span></a>"),$(a+" option").attr("selected",!1),app.clearOneLayerDefObj(n);var s={currentTarget:{id:a,value:""}};AOIChange(s)}$(".radio").on("change",function(e){var i=$("#groupResultsSelect")[0].selectedIndex,t=this.firstElementChild.id;populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),setAggregateGroup(i,t),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&app.createChartQuery()}),$("#phosphorusDownload").click(function(){window.location="https://test.wim.usgs.gov/SparrowGreatLakesV2/downloads/greatlakes_shapefiles_phosphorus.zip"}),$("#nitrogenDownload").click(function(){window.location="https://test.wim.usgs.gov/SparrowGreatLakesV2/downloads/greatlakes_shapefiles_nitrogen.zip"}),$("#popupChartButton").on("click",function(){app.createChartQuery()}),$(".aoiSelect").on("change",AOIChange),$("#groupResultsSelect").on("loaded.bs.select",function(){populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),generateRenderer()});var i=$("#clickPolyButton");i.click(function(){app.clickSelectionActive?(i.removeClass("active"),$("#shiftNote").remove(),i.html('<span class="glyphicon glyphicon-plus"></span>&nbsp;&nbsp;Select'),app.map.setMapCursor("auto"),app.clickSelectionActive=!1,$("#chartButton").prop("disabled",!1)):app.clickSelectionActive||($("#customSelect").append('<div id="shiftNote" style="padding-left: 1em;color: orangered;">Shift+Click to Deselect</div>'),i.addClass("active"),i.html('<i class="glyphicon glyphicon-stop"></i>&nbsp;&nbsp;Stop selecting'),app.map.setMapCursor("crosshair"),$("#chartButton").prop("disabled",!0),app.clickSelectionActive=!0)}),$("#groupResultsSelect").on("changed.bs.select",function(e){app.clearFindGraphics(),populateMetricOptions(e.currentTarget.selectedIndex),setAggregateGroup(e.currentTarget.selectedIndex,$(".radio input[type='radio']:checked")[0].id),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&(app.map.graphics.clear(),app.createChartQuery())}),$("#displayedMetricSelect").on("changed.bs.select",function(e){generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&app.createChartQuery()}),$("#clearAOIButton").on("click",function(){var e=app.map.getLayer("SparrowRanking").visibleLayers[0];if($.inArray(e,splitLayers)>-1){e=returnDefaultLayer(e,$(".radio input[type='radio']:checked")[0].id);var i=[];i.push(e),app.map.getLayer("SparrowRanking").setVisibleLayers(i),app.map.getLayer("SparrowRanking").setDefaultLayerDefinitions(!0)}else app.map.getLayer("SparrowRanking").setDefaultLayerDefinitions(!0);$(".aoiSelect").selectpicker("val",""),populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),app.clearLayerDefObj(),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&app.createChartQuery()}),$(".nonAOISelect").on("change",function(){switch($("#grp1-select").removeClass("disabled"),$("#grp1-select").removeAttr("disabled"),$(".grp1-warning").remove(),$("#grp2-select").removeClass("disabled"),$("#grp2-select").removeAttr("disabled"),$(".grp2-warning").remove(),$("#grp3-select").removeClass("disabled"),$("#grp3-select").removeAttr("disabled"),$(".grp3-warning").remove(),$("#groupResultsSelect")[0].selectedIndex){case 0:$("#grp1-select").selectpicker("refresh"),$("#grp2-select").selectpicker("refresh"),$("#grp3-select").selectpicker("refresh");break;case 1:app.getLayerDefObj().AOI2&&e("grp2-warning","Tributary","HUC8","#grp2-select","AOI2"),$("#grp2-select").attr("disabled","disabled"),$("#grp2-select").addClass("disabled"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh"),$("#grp3-select").selectpicker("refresh");break;case 2:app.getLayerDefObj().AOI3&&e("grp3-warning","HUC8","Tributary","#grp3-select","AOI3"),$("#grp3-select").attr("disabled","disabled"),$("#grp3-select").addClass("disabled"),$("#grp3-select").selectpicker("refresh"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh");break;case 3:app.getLayerDefObj().AOI2&&e("grp2-warning","Tributary","Main River Basin","#grp2-select","AOI2"),$("#grp2-select").attr("disabled","disabled"),$("#grp2-select").addClass("disabled"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh"),app.getLayerDefObj().AOI3&&e("grp3-warning","HUC8","Main River Basin","#grp3-select","AOI3"),$("#grp3-select").attr("disabled","disabled"),$("#grp3-select").addClass("disabled"),$("#grp3-select").selectpicker("refresh");break;case 4:app.getLayerDefObj().AOI1&&e("grp1-warning","Main River Basin","State","#grp1-select","AOI1"),$("#grp1-select").attr("disabled","disabled"),$("#grp1-select").addClass("disabled"),$("#grp1-select").selectpicker("refresh"),app.getLayerDefObj().AOI2&&e("grp2-warning","Tributary","State","#grp2-select","AOI2"),$("#grp2-select").attr("disabled","disabled"),$("#grp2-select").addClass("disabled"),$("#grp2-select").selectpicker("refresh"),app.getLayerDefObj().AOI3&&e("grp3-warning","HUC8","State","#grp3-select","AOI3"),$("#grp3-select").attr("disabled","disabled"),$("#grp3-select").addClass("disabled"),$("#grp3-select").selectpicker("refresh")}}),$("#chartButton").on("click",function(){""!=app.userSelectedDispFieldName?(app.formattedHighlightString=app.userSelectedDispFieldName+" IN ("+app.userSelectedShapes.join(",")+")",app.customChartClicked=!0,console.log("Custom Click: "+app.formattedHighlightString),app.createChartQuery(app.formattedHighlightString),app.userSelectedDispFieldName="",app.userSelectedShapes=[]):app.createChartQuery()}),$(window).resize(function(){$("#legendCollapse").hasClass("in")?(maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("height",maxLegendHeight),$("#legendElement").css("max-height",maxLegendHeight),maxLegendDivHeight=$("#legendElement").height()-parseInt($("#legendHeading").css("height").replace("px","")),$("#legendDiv").css("max-height",maxLegendDivHeight)):$("#legendElement").css("height","initial")}),app.map.on("load",function(){app.initMapScale(),app.map.infoWindow.set("highlight",!1),app.map.infoWindow.set("titleInBody",!1),app.setupDraggableInfoWindow(),app.map.disableClickRecenter()}),app.map.on("zoom-end",function(){var e=app.map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e)}),app.map.on("mouse-move",function(e){app.updateMousePosition(e)}),app.map.on("pan-end",function(){app.updateMapCenter(app.map.extent)}),app.map.on("click",function(e){app.identifyParams=new esri.tasks.IdentifyParameters,app.identifyParams.tolerance=8,app.identifyParams.returnGeometry=!0,app.identifyParams.layerOption=esri.tasks.IdentifyParameters.LAYER_OPTION_VISIBLE,app.identifyParams.width=app.map.width,app.identifyParams.height=app.map.height,app.identifyTask=new esri.tasks.IdentifyTask(serviceBaseURL),app.map.getLayer("SparrowRanking").layerDefinitions&&(app.identifyParams.layerDefinitions=app.map.getLayer("SparrowRanking").layerDefinitions),app.executeIdentifyTask(e)}),$("#btnStreets").on("click",function(){app.map.setBasemap("streets"),app.map.removeLayer(nationalMapBasemap)}),$("#btnSatellite").on("click",function(){app.map.setBasemap("satellite"),app.map.removeLayer(nationalMapBasemap)}),$("#btnHybrid").on("click",function(){app.map.setBasemap("hybrid"),app.map.removeLayer(nationalMapBasemap)}),$("#btnTerrain").on("click",function(){app.map.setBasemap("terrain"),app.map.removeLayer(nationalMapBasemap)}),$("#btnGray").on("click",function(){app.map.setBasemap("gray"),app.map.removeLayer(nationalMapBasemap)}),$("#btnNatGeo").on("click",function(){app.map.setBasemap("national-geographic"),app.map.removeLayer(nationalMapBasemap)}),$("#btnOSM").on("click",function(){app.map.setBasemap("osm"),app.map.removeLayer(nationalMapBasemap)}),$("#btnTopo").on("click",function(){app.map.setBasemap("topo"),app.map.removeLayer(nationalMapBasemap)})}function populateMetricOptions(e){var i;if("radio1"==$(".radio input[type='radio']:checked")[0].id)switch(e){case 0:i=$("#st-select")[0].selectedIndex>0?Catchments_st:Catchments;break;case 1:i=$("#st-select")[0].selectedIndex>0?Group3_st:Group3;break;case 2:i=$("#st-select")[0].selectedIndex>0?Group2_st:Group2;break;case 3:i=$("#st-select")[0].selectedIndex>0?Group1_st:Group1;break;case 4:i=ST}else if("radio2"==$(".radio input[type='radio']:checked")[0].id)switch(e){case 0:i=$("#st-select")[0].selectedIndex>0?Catchments_st_tn:Catchments_tn;break;case 1:i=$("#st-select")[0].selectedIndex>0?Group3_st_tn:Group3_tn;break;case 2:i=$("#st-select")[0].selectedIndex>0?Group2_st_tn:Group2_tn;break;case 3:i=$("#st-select")[0].selectedIndex>0?Group1_st_tn:Group1_tn;break;case 4:i=ST_tn}$("#displayedMetricSelect").find("option").remove(),$.each(i,function(e,i){$("#displayedMetricSelect").append(new Option(i.name,i.field)),$("#displayedMetricSelect").selectpicker("refresh")})}function returnDefaultLayer(e){switch(e){case 5:return 0;case 6:return 1;case 7:return 2;case 8:return 3;case 14:return 9;case 15:return 10;case 16:return 11;case 17:return 12}}function setAggregateGroup(e,i){if("radio1"==i){var t;switch(e){case 0:t=$("#st-select")[0].selectedIndex>0?5:0;break;case 1:t=$("#st-select")[0].selectedIndex>0?6:1;break;case 2:t=$("#st-select")[0].selectedIndex>0?7:2;break;case 3:t=$("#st-select")[0].selectedIndex>0?8:3;break;case 4:t=4}}else if("radio2"==i){var t;switch(e){case 0:t=$("#st-select")[0].selectedIndex>0?14:9;break;case 1:t=$("#st-select")[0].selectedIndex>0?15:10;break;case 2:t=$("#st-select")[0].selectedIndex>0?16:11;break;case 3:t=$("#st-select")[0].selectedIndex>0?17:12;break;case 4:t=13}}var a=[t],n=app.map.getLayer("SparrowRanking");n.setVisibleLayers(a)}function AOIChange(e){var i=e.currentTarget.id,t=e.currentTarget.value,a=$("#groupResultsSelect")[0].selectedIndex,n={selectedId:i,selectedValue:t};"st-select"==i&&4!=a&&(populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),setAggregateGroup(a,$(".radio input[type='radio']:checked")[0].id)),""!=n.selectedValue&&app.setLayerDefObj(n),setLayerDefs(),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&(app.map.graphics.clear(),app.createChartQuery())}function setLayerDefs(){var e="",i=app.getLayerDefObj();i.AOIST&&(e+=""!=e?" AND ST = '"+i.AOIST+"'":"ST = '"+i.AOIST+"'"),i.AOI1&&(e+=""!=e?" AND GP1 = '"+i.AOI1+"'":"GP1 = '"+i.AOI1+"'"),i.AOI2&&(e+=""!=e?" AND GP2 = '"+i.AOI2+"'":"GP2 = '"+i.AOI2+"'"),i.AOI3&&(e+=""!=e?" AND GP3 = '"+i.AOI3+"'":"GP3 = '"+i.AOI3+"'");var t=[];t[0]=e,t[1]=e,t[2]=e,t[3]=e,t[4]=e,t[5]=e,t[6]=e,t[7]=e,t[8]=e,t[9]=e,t[10]=e,t[11]=e,t[12]=e,t[13]=e,t[14]=e,t[15]=e,t[16]=e,t[17]=e,app.map.getLayer("SparrowRanking").setLayerDefinitions(t)}function getTableFields(e,i){var t=[],a=[],n=[],s="";switch(i){case 0:n=Group3,s="GP3",$.each(tableOutFields,function(e,i){t.push(i)});break;case 4:n=Group3_st,s="SG3",$.each(stateTableOutFields,function(e,i){t.push(i)});break;case 7:n=Group3_tn,s="GP3",$.each(tableOutFields,function(e,i){t.push(i)});break;case 11:n=Group3_st_tn,s="SG3",$.each(stateTableOutFields,function(e,i){t.push(i)})}return $.each(n,function(e,i){t.push({field:i.field,name:i.name}),$.each(i.chartOutfields,function(e,i){i.attribute==s&&t.map(function(e){return e.field}).indexOf(s)<0?t.push({field:i.attribute,name:i.label}):i.attribute!=s&&t.push({field:i.attribute,name:i.label})})}),a.push("<tr>"),$.each(e,function(e,i){console.log(i),$.each(t,function(e,t){return i==t.field?(console.log(t.field),a.push("<th>"+t.name+"</th>"),!1):void 0})}),a.push("</tr>"),a.join("")}function getLegendLabels(e){var i="",t=app.getLayerConfigObject(e);return $.each(t,function(e,t){$("#displayedMetricSelect").val()==t.field&&(i=t.name)}),i}function getChartOutfields(e){var i=[];console.log("in GetChartOutfields()");var t=app.getLayerConfigObject(e);return $.each(t,function(e,t){$("#displayedMetricSelect").val()==t.field&&$.each(t.chartOutfields,function(e,t){i.push(t)})}),i}function getExtraOutfields(e,i){var t=e;switch(i){case 0:case 9:t.push("DEMIAREA"),t.push("DEMTAREA"),t.push("MRB_ID");break;case 1:case 10:t.push("GP3_AREA");break;case 2:case 11:t.push("GP2_AREA");break;case 3:case 12:t.push("GP1_AREA");break;case 4:case 13:t.push("ST_AREA");break;case 5:case 14:t.push("STDEMIAREA"),t.push("STDEMTAREA"),t.push("ST_MRB_ID");break;case 6:case 15:t.push("SG3_AREA");break;case 7:case 16:t.push("SG2_AREA");break;case 8:case 17:t.push("SG1_AREA")}return t}function generateRenderer(){require(["esri/map","esri/Color","esri/dijit/Legend","esri/layers/LayerDrawingOptions","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/tasks/ClassBreaksDefinition","esri/tasks/AlgorithmicColorRamp","esri/tasks/GenerateRendererParameters","esri/tasks/GenerateRendererTask","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(e,i,t,a,n,s,r,o,p,l,c,g,f){function u(e){var i=app.map.getLayer("SparrowRanking").visibleLayers[0],t=app.map.getLayer("SparrowRanking"),n=[],s=new a;s.renderer=e,n[i]=s,t.setLayerDrawingOptions(n),app.hasOwnProperty("legend")?app.legend.refresh([{layer:app.map.getLayer("SparrowRanking"),title:getLegendLabels(app.map.getLayer("SparrowRanking").visibleLayers[0])}]):D(),0==t.visible&&t.show()}function d(e){console.log("generateRenderer Err ",e)}function D(){app.legend=new t({map:app.map,layerInfos:[{layer:app.map.getLayer("SparrowRanking"),title:getLegendLabels(app.map.getLayer("SparrowRanking").visibleLayers[0])}]},c.byId("legendDiv")),app.legend.startup()}var m=app.map.getLayer("SparrowRanking").visibleLayers[0];if(app.map.getLayer("SparrowRanking").layerDefinitions){var b=app.map.getLayer("SparrowRanking").layerDefinitions[m];app.layerDef=b}else app.map.getLayer("SparrowRanking").setDefaultLayerDefinitions(),app.layerDef="1=1";app.Url="https://gis.wim.usgs.gov/arcgis/rest/services/SparrowGreatLakesV2/SparrowGreatLakes/MapServer/"+m;var h=$("#displayedMetricSelect")[0].value;app.outFields=[h],app.currentAttribute=h;var S=new r;S.classificationField=app.currentAttribute,S.classificationMethod="quantile",S.breakCount=5,S.baseSymbol=new s("solid",null,null);var _=new o;"radio1"==$(".radio input[type='radio']:checked")[0].id?(_.fromColor=new i.fromHex("#FFF1DC"),_.toColor=new i.fromHex("#632E0E")):(_.fromColor=new i.fromHex("#F5EBB8"),_.toColor=new i.fromHex("#004120")),_.algorithm="hsv",S.colorRamp=_;var y=new p;y.classificationDefinition=S,y.formatLabel=!1,y.where=app.layerDef;var A=new l(app.Url);A.execute(y,u,d)})}var serviceBaseURL="https://gis.wim.usgs.gov/arcgis/rest/services/SparrowGreatLakesV2/SparrowGreatLakes/MapServer/",chartUnits=" (kg/yr.)",groupResultsInitIndex=1,splitLayers=[5,6,7,13,14,15],mapCenter=[-87,42];defaultZoomLevel=6;var tableOutFields=[{field:"FID",name:"Unique Feature Id"},{field:"GRP1",name:"Main River Basin"},{field:"GRP2",name:"Tributary"},{field:"GRP_3_NA_1",name:"Join Field"},{field:"Area_g3",name:"HUC10 area (mi2)"}],stateTableOutFields=[{field:"FID",name:"Unique Feature Id"},{field:"ST_GP3_NAM",name:"HUC10/State (combination) ID"},{field:"Area_S3",name:"HUC10 area within the state and the  model area (mi2)"},{field:"ST",name:"State"},{field:"GRP_1_NAM",name:"Independent Watershed name (in which HUC10 is nested)"},{field:"GP2",name:"HUC8 (in which HUC10 is nested)"},{field:"GRP_3_NAM",name:"HUC10"},{field:"ST_GP1_NAM",name:"State and Independent Watershed"},{field:"ST_GP2_NAM",name:"State amd HUC8"},{field:"ST_gp3_n_1",name:"Join Field"}],aggregateDefinitions={st:"State",gp1:"Main River Basin",gp2:"Tributary",gp3:"HUC8",sg1:"State_Main River Basin",sg2:"State_Tributary",sg3:"State_HUC8"},catchmentDefinitions={mrb_id:"SPARROW Reach ID",st_mrb_id:"SPARROW Reach ID by State",pname:"Reach Name",accl:"Accumulated load (kg)",incl:"Incremental load (kg)",accy:"Accumulated yield (kg/km2)",incy:"Incremental yield (kg/km2)",daccl:"Delivered accumulated load (kg)",daccy:"Delivered accumulated yield (kg/km2)",dincl:"Delivered incremental load  (kg)",dincy:"Delivered incremental yield (kg/km2)"},catchmentDefinitions_tn={mrb_id:"SPARROW Reach ID",st_mrb_id:"SPARROW Reach ID by State",pname:"Reach Name",accl:"Accumulated load (kg)",incl:"Incremental load (kg)",accy:"Accumulated yield (kg/km2)",incy:"Incremental yield (kg/km2)",daccl:"Delivered accumulated load (kg)",daccy:"Delivered accumulated yield (kg/km2)",dincl:"Delivered incremental load  (kg)",dincy:"Delivered incremental yield (kg/km2)"},mappedDefinitions={area:"aggregated area (km2)",al:"aggregated load (kg)",ay:"aggregated yield (kg/km2)",dal:"delivered aggregated load (kg)",day:"delivered aggregated yield (kg/km2)",ap:"percent of aggregated load",dap:"percent of delivered aggregated load"},phosphorusSourceDefinitons={s1:"Urban Land",s2:"Sewerage Point Sources",s3:"Manure (Confined)",s4:"Manure (Unconfined)",s5:"Farm Fertilizer",s6:"Forest/Wetland"},nitrogenSourceDefinitions={s1:"Point Sources",s2:"Manure (Confined)",s3:"Farm Fertilizer",s4:"Additional Agricultural Sources",s5:"Atmospheric Depositon"},Catchments=[{field:"ACCL",name:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.accl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCL_S1",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s1},{attribute:"ACCL_S2",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s2},{attribute:"ACCL_S3",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s3},{attribute:"ACCL_S4",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s4},{attribute:"ACCL_S5",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s5},{attribute:"ACCL_S6",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s6}]},{field:"INCL",name:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.incl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCL_S1",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s1},{attribute:"INCL_S2",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s2},{attribute:"INCL_S3",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s3},{attribute:"INCL_S4",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s4},{attribute:"INCL_S5",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s5},{attribute:"INCL_S6",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s6}]},{field:"ACCY",name:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.accy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.accy+" all sources"}]},{field:"INCY",name:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.incy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.incy+" all sources"}]},{field:"DACCL",name:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.daccl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCL",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.daccl+" all sources"}]},{field:"DACCY",name:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.daccy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.daccy+" all sources"}]},{field:"DINCL",name:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.dincl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCL_S1",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s1},{attribute:"DINCL_S2",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s2},{attribute:"DINCL_S3",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s3},{attribute:"DINCL_S4",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s4},{attribute:"DINCL_S5",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s5},{attribute:"DINCL_S6",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s6}]},{field:"DINCY",name:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.dincy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.dincy+" all sources"}]}],Group3=[{field:"GP3_AL",name:aggregateDefinitions.gp3+" "+mappedDefinitions.al,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AL_S1",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_AL_S2",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_AL_S3",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_AL_S4",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_AL_S5",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_AL_S6",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"GP3_DAL",name:aggregateDefinitions.gp3+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAL_S1",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_DAL_S2",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_DAL_S3",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_DAL_S4",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_DAL_S5",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_DAL_S6",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"GP3_AY",name:aggregateDefinitions.gp3+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AY_S1",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_AY_S2",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_AY_S3",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_AY_S4",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_AY_S5",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_AY_S6",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"GP3_DAY",name:aggregateDefinitions.gp3+" "+mappedDefinitions.day,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAY_S1",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_DAY_S2",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_DAY_S3",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_DAY_S4",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_DAY_S5",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_DAY_S6",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],Group2=[{field:"GP2_AL",name:aggregateDefinitions.gp2+" "+mappedDefinitions.al,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_AL_S1",label:aggregateDefinitions.gp2+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"GP2_AL_S2",label:aggregateDefinitions.gp2+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"GP2_AL_S3",label:aggregateDefinitions.gp2+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"GP2_AL_S4",label:aggregateDefinitions.gp2+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"GP2_AL_S5",label:aggregateDefinitions.gp2+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"GP2_AL_S6",label:aggregateDefinitions.gp2+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"GP2_DAL",name:aggregateDefinitions.gp2+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_DAL_S1",label:aggregateDefinitions.gp2+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"GP2_DAL_S2",label:aggregateDefinitions.gp2+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"GP2_DAL_S3",label:aggregateDefinitions.gp2+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"GP2_DAL_S4",label:aggregateDefinitions.gp2+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"GP2_DAL_S5",label:aggregateDefinitions.gp2+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"GP2_DAL_S6",label:aggregateDefinitions.gp2+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"GP2_AY",name:aggregateDefinitions.gp2+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_AY_S1",label:aggregateDefinitions.gp2+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"GP2_AY_S2",label:aggregateDefinitions.gp2+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"GP2_AY_S3",label:aggregateDefinitions.gp2+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"GP2_AY_S4",label:aggregateDefinitions.gp2+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"GP2_AY_S5",label:aggregateDefinitions.gp2+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"GP2_AY_S6",label:aggregateDefinitions.gp2+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"GP2_DAY",name:aggregateDefinitions.gp2+" "+mappedDefinitions.day,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_DAY_S1",label:aggregateDefinitions.gp2+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"GP2_DAY_S2",label:aggregateDefinitions.gp2+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"GP2_DAY_S3",label:aggregateDefinitions.gp2+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"GP2_DAY_S4",label:aggregateDefinitions.gp2+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"GP2_DAY_S5",label:aggregateDefinitions.gp2+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"GP2_DAY_S6",label:aggregateDefinitions.gp2+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],Group1=[{field:"GP1_AL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.al,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_AL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"GP1_AL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"GP1_AL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"GP1_AL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"GP1_AL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"GP1_AL_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"GP1_DAL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_DAL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"GP1_DAL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"GP1_DAL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"GP1_DAL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"GP1_DAL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"GP1_DAL_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"GP1_AY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_AY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"GP1_AY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"GP1_AY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"GP1_AY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"GP1_AY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"GP1_AY_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"GP1_DAY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.day,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_DAY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"GP1_DAY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"GP1_DAY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"GP1_DAY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"GP1_DAY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"GP1_DAY_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],ST=[{field:"ST_AL",name:aggregateDefinitions.st+" "+mappedDefinitions.al,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_AL_S1",label:aggregateDefinitions.st+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"ST_AL_S2",label:aggregateDefinitions.st+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"ST_AL_S3",label:aggregateDefinitions.st+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"ST_AL_S4",label:aggregateDefinitions.st+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"ST_AL_S5",label:aggregateDefinitions.st+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"ST_AL_S6",label:aggregateDefinitions.st+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6
}]},{field:"ST_DAL",name:aggregateDefinitions.st+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_DAL_S1",label:aggregateDefinitions.st+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"ST_DAL_S2",label:aggregateDefinitions.st+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"ST_DAL_S3",label:aggregateDefinitions.st+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"ST_DAL_S4",label:aggregateDefinitions.st+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"ST_DAL_S5",label:aggregateDefinitions.st+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"ST_DAL_S6",label:aggregateDefinitions.st+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"ST_AY",name:aggregateDefinitions.st+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_AY_S1",label:aggregateDefinitions.st+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"ST_AY_S2",label:aggregateDefinitions.st+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"ST_AY_S3",label:aggregateDefinitions.st+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"ST_AY_S4",label:aggregateDefinitions.st+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"ST_AY_S5",label:aggregateDefinitions.st+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"ST_AY_S6",label:aggregateDefinitions.st+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"ST_DAY",name:aggregateDefinitions.st+" "+mappedDefinitions.day,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_DAY_S1",label:aggregateDefinitions.st+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"ST_DAY_S2",label:aggregateDefinitions.st+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"ST_DAY_S3",label:aggregateDefinitions.st+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"ST_DAY_S4",label:aggregateDefinitions.st+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"ST_DAY_S5",label:aggregateDefinitions.st+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"ST_DAY_S6",label:aggregateDefinitions.st+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],Catchments_st=[{field:"ACCL",name:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.accl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCL_S1",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s1},{attribute:"ACCL_S2",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s2},{attribute:"ACCL_S3",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s3},{attribute:"ACCL_S4",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s4},{attribute:"ACCL_S5",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s5},{attribute:"ACCL_S6",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s6}]},{field:"INCL",name:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.incl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCL_S1",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s1},{attribute:"INCL_S2",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s2},{attribute:"INCL_S3",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s3},{attribute:"INCL_S4",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s4},{attribute:"INCL_S5",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s5},{attribute:"INCL_S6",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s6}]},{field:"ACCY",name:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.accy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.accy+" all sources"}]},{field:"INCY",name:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.incy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.incy+" all sources"}]},{field:"DACCL",name:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.daccl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCL",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.daccl+" all sources"}]},{field:"DACCY",name:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.daccy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.daccy+" all sources"}]},{field:"DINCL",name:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.dincl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCL_S1",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s1},{attribute:"DINCL_S2",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s2},{attribute:"DINCL_S3",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s3},{attribute:"DINCL_S4",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s4},{attribute:"DINCL_S5",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s5},{attribute:"DINCL_S6",label:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s6}]},{field:"DINCY",name:catchmentDefinitions.st_mrb_id+" "+catchmentDefinitions.dincy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.dincy+" all sources"}]}],Group3_st=[{field:"SG3_AL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.al,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.gp1},{attribute:"SG3_AL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"SG3_AL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"SG3_AL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"SG3_AL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"SG3_AL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"SG3_AL_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"SG3_DAL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.gp1},{attribute:"SG3_DAL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"SG3_DAL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"SG3_DAL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"SG3_DAL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"SG3_DAL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"SG3_DAL_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"SG3_AY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.gp1},{attribute:"SG3_AY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"SG3_AY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"SG3_AY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"SG3_AY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"SG3_AY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"SG3_AY_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"SG3_DAY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.day,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.gp1},{attribute:"SG3_DAY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"SG3_DAY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"SG3_DAY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"SG3_DAY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"SG3_DAY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"SG3_DAY_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],Group2_st=[{field:"SG2_AL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.al,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.gp1},{attribute:"SG2_AL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"SG2_AL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"SG2_AL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"SG2_AL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"SG2_AL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"SG2_AL_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"SG2_DAL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.gp1},{attribute:"SG2_DAL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"SG2_DAL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"SG2_DAL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"SG2_DAL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"SG2_DAL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"SG2_DAL_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"SG2_AY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.gp1},{attribute:"SG2_AY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"SG2_AY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"SG2_AY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"SG2_AY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"SG2_AY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"SG2_AY_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"SG2_DAY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.day,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.gp1},{attribute:"SG2_DAY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"SG2_DAY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"SG2_DAY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"SG2_DAY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"SG2_DAY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"SG2_DAY_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],Group1_st=[{field:"SG1_AL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.al,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.gp1},{attribute:"SG1_AL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"SG1_AL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"SG1_AL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"SG1_AL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"SG1_AL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"SG1_AL_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6}]},{field:"SG1_DAL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.gp1},{attribute:"SG1_DAL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"SG1_DAL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"SG1_DAL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"SG1_DAL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"SG1_DAL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"SG1_DAL_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6}]},{field:"SG1_AY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.gp1},{attribute:"SG1_AY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"SG1_AY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"SG1_AY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"SG1_AY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"SG1_AY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"SG1_AY_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6}]},{field:"SG1_DAY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.day,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.gp1},{attribute:"SG1_DAY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"SG1_DAY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"SG1_DAY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"SG1_DAY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"SG1_DAY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"SG1_DAY_S6",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6}]}],Catchments_tn=[{field:"ACCL",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCL_S1",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s1},{attribute:"ACCL_S2",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s2},{attribute:"ACCL_S3",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s3},{attribute:"ACCL_S4",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s4},{attribute:"ACCL_S5",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s5}]},{field:"INCL",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCL_S1",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s1},{attribute:"INCL_S2",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s2},{attribute:"INCL_S3",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s3},{attribute:"INCL_S4",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s4},{attribute:"INCL_S5",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s5}]},{field:"ACCY",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.accy+" all sources"}]},{field:"INCY",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.incy+" all sources"}]},{field:"DACCL",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.daccl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCL",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.daccl+" all sources"}]},{field:"DACCY",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.daccy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.daccy+" all sources"}]},{field:"DINCL",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCL_S1",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s1},{attribute:"DINCL_S2",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s2},{attribute:"DINCL_S3",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s3},{attribute:"DINCL_S4",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s4},{attribute:"DINCL_S5",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s5}]},{field:"DINCY",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.dincy+" all sources"}]}],Group3_tn=[{field:"GP3_AL",name:aggregateDefinitions.gp3+" "+mappedDefinitions.al,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AL_S1",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"GP3_AL_S2",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"GP3_AL_S3",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"GP3_AL_S4",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"GP3_AL_S5",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"GP3_DAL",name:aggregateDefinitions.gp3+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAL_S1",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"GP3_DAL_S2",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"GP3_DAL_S3",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"GP3_DAL_S4",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"GP3_DAL_S5",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"GP3_AY",name:aggregateDefinitions.gp3+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AY_S1",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"GP3_AY_S2",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"GP3_AY_S3",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"GP3_AY_S4",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"GP3_AY_S5",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"GP3_DAY",name:aggregateDefinitions.gp3+" "+mappedDefinitions.day,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAY_S1",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"GP3_DAY_S2",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"GP3_DAY_S3",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"GP3_DAY_S4",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"GP3_DAY_S5",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],Group2_tn=[{field:"GP2_AL",name:aggregateDefinitions.gp2+" "+mappedDefinitions.al,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_AL_S1",label:aggregateDefinitions.gp2+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"GP2_AL_S2",label:aggregateDefinitions.gp2+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"GP2_AL_S3",label:aggregateDefinitions.gp2+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"GP2_AL_S4",label:aggregateDefinitions.gp2+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"GP2_AL_S5",label:aggregateDefinitions.gp2+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"GP2_DAL",name:aggregateDefinitions.gp2+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_DAL_S1",label:aggregateDefinitions.gp2+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"GP2_DAL_S2",label:aggregateDefinitions.gp2+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"GP2_DAL_S3",label:aggregateDefinitions.gp2+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"GP2_DAL_S4",label:aggregateDefinitions.gp2+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"GP2_DAL_S5",label:aggregateDefinitions.gp2+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"GP2_AY",name:aggregateDefinitions.gp2+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_AY_S1",label:aggregateDefinitions.gp2+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"GP2_AY_S2",label:aggregateDefinitions.gp2+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"GP2_AY_S3",label:aggregateDefinitions.gp2+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"GP2_AY_S4",label:aggregateDefinitions.gp2+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"GP2_AY_S5",label:aggregateDefinitions.gp2+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"GP2_DAY",name:aggregateDefinitions.gp2+" "+mappedDefinitions.day,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_DAY_S1",label:aggregateDefinitions.gp2+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"GP2_DAY_S2",label:aggregateDefinitions.gp2+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"GP2_DAY_S3",label:aggregateDefinitions.gp2+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"GP2_DAY_S4",label:aggregateDefinitions.gp2+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"GP2_DAY_S5",label:aggregateDefinitions.gp2+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],Group1_tn=[{field:"GP1_AL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.al,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_AL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"GP1_AL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"GP1_AL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"GP1_AL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"GP1_AL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"GP1_DAL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_DAL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"GP1_DAL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"GP1_DAL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"GP1_DAL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"GP1_DAL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"GP1_AY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_AY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"GP1_AY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"GP1_AY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"GP1_AY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"GP1_AY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"GP1_DAY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.day,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_DAY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"GP1_DAY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"GP1_DAY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"GP1_DAY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"GP1_DAY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],ST_tn=[{field:"ST_AL",name:aggregateDefinitions.st+" "+mappedDefinitions.al,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_AL_S1",label:aggregateDefinitions.st+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"ST_AL_S2",label:aggregateDefinitions.st+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"ST_AL_S3",label:aggregateDefinitions.st+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"ST_AL_S4",label:aggregateDefinitions.st+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"ST_AL_S5",label:aggregateDefinitions.st+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"ST_DAL",name:aggregateDefinitions.st+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_DAL_S1",label:aggregateDefinitions.st+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"ST_DAL_S2",label:aggregateDefinitions.st+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"ST_DAL_S3",label:aggregateDefinitions.st+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"ST_DAL_S4",label:aggregateDefinitions.st+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"ST_DAL_S5",label:aggregateDefinitions.st+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"ST_AY",name:aggregateDefinitions.st+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_AY_S1",label:aggregateDefinitions.st+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"ST_AY_S2",label:aggregateDefinitions.st+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"ST_AY_S3",label:aggregateDefinitions.st+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"ST_AY_S4",label:aggregateDefinitions.st+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"ST_AY_S5",label:aggregateDefinitions.st+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"ST_DAY",name:aggregateDefinitions.st+" "+mappedDefinitions.day,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_DAY_S1",label:aggregateDefinitions.st+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"ST_DAY_S2",label:aggregateDefinitions.st+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"ST_DAY_S3",label:aggregateDefinitions.st+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"ST_DAY_S4",label:aggregateDefinitions.st+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"ST_DAY_S5",label:aggregateDefinitions.st+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],Catchments_st_tn=[{field:"ACCL",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accl,chartOutfields:[{attribute:"MRB_ID",label:catchmentDefinitions.pname},{attribute:"ACCL_S1",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s1},{attribute:"ACCL_S2",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s2},{attribute:"ACCL_S3",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s3},{attribute:"ACCL_S4",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s4
},{attribute:"ACCL_S5",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s5}]},{field:"INCL",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCL_S1",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s1},{attribute:"INCL_S2",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s2},{attribute:"INCL_S3",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s3},{attribute:"INCL_S4",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s4},{attribute:"INCL_S5",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s5}]},{field:"ACCY",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.accy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"ACCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.accy+" all sources"}]},{field:"INCY",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.incy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"INCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.incy+" all sources"}]},{field:"DACCL",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.daccl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCL",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.daccl+" all sources"}]},{field:"DACCY",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.daccy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DACCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.daccy+" all sources"}]},{field:"DINCL",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincl,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCL_S1",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s1},{attribute:"DINCL_S2",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s2},{attribute:"DINCL_S3",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s3},{attribute:"DINCL_S4",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s4},{attribute:"DINCL_S5",label:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s5}]},{field:"DINCY",name:catchmentDefinitions_tn.mrb_id+" "+catchmentDefinitions_tn.dincy,chartOutfields:[{attribute:"PNAME",label:catchmentDefinitions.pname},{attribute:"DINCY",label:catchmentDefinitions.mrb_id+" "+catchmentDefinitions.dincy+" all sources"}]}],Group3_st_tn=[{field:"SG3_AL",name:aggregateDefinitions.gp3+" "+mappedDefinitions.al,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.gp3},{attribute:"SG3_AL_S1",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"SG3_AL_S2",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"SG3_AL_S3",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"SG3_AL_S4",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"SG3_AL_S5",label:aggregateDefinitions.gp3+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"SG3_DAL",name:aggregateDefinitions.gp3+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.gp3},{attribute:"SG3_DAL_S1",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"SG3_DAL_S2",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"SG3_DAL_S3",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"SG3_DAL_S4",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"SG3_DAL_S5",label:aggregateDefinitions.gp3+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"SG3_AY",name:aggregateDefinitions.gp3+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.gp3},{attribute:"SG3_AY_S1",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"SG3_AY_S2",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"SG3_AY_S3",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"SG3_AY_S4",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"SG3_AY_S5",label:aggregateDefinitions.gp3+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"SG3_DAY",name:aggregateDefinitions.gp3+" "+mappedDefinitions.day,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.gp3},{attribute:"SG3_DAY_S1",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"SG3_DAY_S2",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"SG3_DAY_S3",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"SG3_DAY_S4",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"SG3_DAY_S5",label:aggregateDefinitions.gp3+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],Group2_st_tn=[{field:"SG2_AL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.al,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.gp1},{attribute:"SG2_AL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"SG2_AL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"SG2_AL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"SG2_AL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"SG2_AL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"SG2_DAL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.gp1},{attribute:"SG2_DAL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"SG2_DAL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"SG2_DAL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"SG2_DAL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"SG2_DAL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"SG2_AY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.gp1},{attribute:"SG2_AY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"SG2_AY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"SG2_AY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"SG2_AY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"SG2_AY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"SG2_DAY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.day,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.gp1},{attribute:"SG2_DAY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"SG2_DAY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"SG2_DAY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"SG2_DAY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"SG2_DAY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],Group1_st_tn=[{field:"SG1_AL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.al,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.gp1},{attribute:"SG1_AL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"SG1_AL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"SG1_AL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"SG1_AL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"SG1_AL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5}]},{field:"SG1_DAL",name:aggregateDefinitions.gp1+" "+mappedDefinitions.dal,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.gp1},{attribute:"SG1_DAL_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"SG1_DAL_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"SG1_DAL_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"SG1_DAL_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"SG1_DAL_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5}]},{field:"SG1_AY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.ay,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.gp1},{attribute:"SG1_AY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"SG1_AY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"SG1_AY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"SG1_AY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"SG1_AY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5}]},{field:"SG1_DAY",name:aggregateDefinitions.gp1+" "+mappedDefinitions.day,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.gp1},{attribute:"SG1_DAY_S1",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"SG1_DAY_S2",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"SG1_DAY_S3",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"SG1_DAY_S4",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"SG1_DAY_S5",label:aggregateDefinitions.gp1+" "+mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5}]}],queryParameters={grp3:{idField:"GRP_3_NUM",nameField:["GRP_3_NAM","GRP_2_NAM","GRP_1_NAM","ST"],alias:"HUC10",serviceId:4,AOISelect:!1},grp2:{idField:"GRP_2_NUM",nameField:["GRP_2_NAM"],alias:"HUC8",serviceId:1,AOISelect:!0},grp1:{idField:"GRP_1_NUM",nameField:["GRP_1_NAM"],alias:"Independent Watershed",serviceId:2,AOISelect:!0},st:{idField:"ST",nameField:["ST"],alias:"State",serviceId:3,AOISelect:!0}},allLayers;require(["esri/geometry/Extent","esri/layers/WMSLayerInfo","esri/layers/FeatureLayer","esri/layers/ImageParameters","dojo/domReady!"],function(e,i,t,a){var n;n=1==$("#radio1")[0].checked?0:1,allLayers=[{groupHeading:"Nutrient Model",showGroupHeading:!0,includeInLayerList:!0,layers:{"Nutrient Model Results Overlay":{url:serviceBaseURL,visibleLayers:[n],options:{id:"SparrowRanking",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}}}},{groupHeading:"Model Calibration Sites",showGroupHeading:!0,includeInLayerList:!0,layers:{"Phosphorus Calibration Sites":{url:serviceBaseURL,visibleLayers:[18],options:{id:"phosCalibration",opacity:.85,visible:!1},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,zoomScale:144448,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!0}},"Nitrogen Calibration Sites":{url:serviceBaseURL,visibleLayers:[19],options:{id:"nitroCalibration",visible:!1,opacity:.85},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}}}},{groupHeading:"Auxilliary Layers",showGroupHeading:!0,includeInLayerList:!0,layers:{"Great Lakes Streams":{url:serviceBaseURL,visibleLayers:[20],options:{id:"streams",visible:!1,opacity:.6},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}},"Land Use 2012":{url:"https://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/lu2012_100515_test/ImageServer",options:{id:"lu2012",opacity:.5,visible:!1},wimOptions:{type:"layer",layerType:"agisImage",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}}}}]}),function(e){"object"==typeof module&&module.exports?module.exports=e:e(Highcharts)}(function(e){"use strict";function i(i,t,a,n,r){var o,p,l,c=(i.options.exporting||{}).csv||{},g=c.url||"http://www.highcharts.com/studies/csv-export/download.php";l=i.options.exporting.filename?i.options.exporting.filename:i.title?i.title.textStr.replace(/ /g,"-").toLowerCase():"chart",window.Blob&&window.navigator.msSaveOrOpenBlob?(p=new Blob([n]),window.navigator.msSaveOrOpenBlob(p,l+"."+a)):s?(o=document.createElement("a"),o.href=t,o.target="_blank",o.download=l+"."+a,i.container.append(o),o.click(),o.remove()):e.post(g,{data:n,type:r,extension:a})}var t=e.each,a=e.pick,n=e.seriesTypes,s=void 0!==document.createElement("a").download;e.setOptions({lang:{downloadCSV:"Download CSV",downloadXLS:"Download XLS",viewData:"View data table"}}),e.Chart.prototype.getDataRows=function(){var i,n,s,r,o,p=(this.options.exporting||{}).csv||{},l=this.xAxis,c={},g=[],f=[],u=p.dateFormat||"%Y-%m-%d %H:%M:%S",d=p.columnHeaderFormatter||function(i,t,a){return i instanceof e.Axis?i.options.title&&i.options.title.text||(i.isDatetimeAxis?"DateTime":"Category"):i?i.name+(a>1?" ("+t+")":""):"Category"},D=[];s=0,t(this.series,function(i){var n,r=i.options.keys,o=r||i.pointArrayMap||["y"],p=o.length,g=i.requireSorting,u={},m=e.inArray(i.xAxis,l);if(t(o,function(e){u[e]=i[e+"Axis"]&&i[e+"Axis"].categories||[]}),i.options.includeInCSVExport!==!1&&i.visible!==!1){for(e.find(D,function(e){return e[0]===m})||D.push([m,s]),n=0;p>n;)f.push(d(i,o[n],o.length)),n+=1;t(i.points,function(e,t){var r,l,f=g?e.x:t;for(n=0,c[f]||(c[f]=[],c[f].xValues=[]),c[f].x=e.x,c[f].xValues[m]=e.x,i.xAxis&&"name"!==i.exportKey||(c[f].name=e.name);p>n;)r=o[n],l=e[r],c[f][s+n]=a(u[r][l],l),n+=1}),s+=n}});for(r in c)c.hasOwnProperty(r)&&g.push(c[r]);var m,b;for(n=[f],s=D.length;s--;)m=D[s][0],b=D[s][1],i=l[m],g.sort(function(e,i){return e.xValues[m]-i.xValues[m]}),o=d(i),n[0].splice(b,0,o),t(g,function(t){var n=t.name;n||(i.isDatetimeAxis?(t.x instanceof Date&&(t.x=t.x.getTime()),n=e.dateFormat(u,t.x)):n=i.categories?a(i.names[t.x],i.categories[t.x],t.x):t.x),t.splice(b,0,n)});return n=n.concat(g)},e.Chart.prototype.getCSV=function(e){var i="",a=this.getDataRows(),n=(this.options.exporting||{}).csv||{},s=n.itemDelimiter||",",r=n.lineDelimiter||"\n";return t(a,function(t,n){for(var o="",p=t.length,l=e?1.1.toLocaleString()[1]:".";p--;)o=t[p],"string"==typeof o&&(o='"'+o+'"'),"number"==typeof o&&","===l&&(o=o.toString().replace(".",",")),t[p]=o;i+=t.join(s),n<a.length-1&&(i+=r)}),i},e.Chart.prototype.getTable=function(e){var i="<table><thead>",a=this.getDataRows();return t(a,function(t,a){var n,s,r=a?"td":"th",o=e?1.1.toLocaleString()[1]:".";for(i+="<tr>",s=0;s<t.length;s+=1)n=t[s],"number"==typeof n?(n=n.toString(),","===o&&(n=n.replace(".",o)),i+="<"+r+' class="number">'+n+"</"+r+">"):i+="<"+r+">"+(void 0===n?"":n)+"</"+r+">";i+="</tr>",a||(i+="</thead><tbody>")}),i+="</tbody></table>"},e.Chart.prototype.downloadCSV=function(){var e=this.getCSV(!0);i(this,"data:text/csv,\ufeff"+encodeURIComponent(e),"csv",e,"text/csv")},e.Chart.prototype.downloadXLS=function(){var e="data:application/vnd.ms-excel;base64,",t='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Ark1</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--><style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";}</style><meta name=ProgId content=Excel.Sheet><meta charset=UTF-8></head><body>'+this.getTable(!0)+"</body></html>",a=function(e){return window.btoa(unescape(encodeURIComponent(e)))};i(this,e+a(t),"xls",t,"application/vnd.ms-excel")},e.Chart.prototype.viewData=function(){this.dataTableDiv||(this.dataTableDiv=document.createElement("div"),this.dataTableDiv.className="highcharts-data-table",this.renderTo.parentNode.insertBefore(this.dataTableDiv,this.renderTo.nextSibling)),this.dataTableDiv.innerHTML=this.getTable()},e.getOptions().exporting&&e.getOptions().exporting.buttons.contextButton.menuItems.push({textKey:"downloadCSV",onclick:function(){this.downloadCSV()}},{textKey:"downloadXLS",onclick:function(){this.downloadXLS()}},{textKey:"viewData",onclick:function(){this.viewData()}}),n.map&&(n.map.prototype.exportKey="name"),n.mapbubble&&(n.mapbubble.prototype.exportKey="name")});var app={};require(["esri/arcgis/utils","esri/map","esri/tasks/QueryTask","esri/tasks/query","esri/Color","esri/dijit/HomeButton","esri/dijit/LocateButton","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/FeatureLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/WMSLayer","esri/dijit/Geocoder","esri/dijit/PopupTemplate","esri/graphic","esri/geometry/Extent","esri/geometry/Multipoint","esri/geometry/Point","esri/layers/LayerDrawingOptions","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/tasks/ClassBreaksDefinition","esri/tasks/AlgorithmicColorRamp","esri/tasks/GenerateRendererParameters","esri/tasks/GenerateRendererTask","esri/tasks/IdentifyTask","esri/tasks/IdentifyParameters","esri/tasks/ProjectParameters","esri/geometry/webMercatorUtils","esri/SpatialReference","dojo/parser","dojo/dnd/Moveable","dojo/query","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(e,i,t,a,n,s,r,o,p,l,c,g,f,u,d,D,m,b,h,S,_,y,A,G,L,v,C,I,P,O,w,k,x,T,Y,R,N){function M(e,i,t){var a;a=new esri.tasks.QueryTask(e);var n=new esri.tasks.Query;n.returnGeometry=!1,n.outFields=i,n.where=t,a.execute(n,F)}function F(e){$.each(e.features,function(e,i){K.push(i.attributes)}),E()}function E(){var e=ie(K,"GP3"),i=ie(K,"GP2"),t=ie(K,"GP1"),a=ie(K,"ST");$.each(e,function(e,i){" "!=i&&$("#grp3-select").append(new Option(i))}),$.each(i,function(e,i){" "!=i&&$("#grp2-select").append(new Option(i))}),$.each(t,function(e,i){" "!=i&&$("#grp1-select").append(new Option(i))}),$.each(a,function(e,i){$("#st-select").append(new Option(i))}),$("#grp3-select").selectpicker("refresh"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh"),$("#st-select").selectpicker("refresh")}function B(e){app.clearFindGraphics();var i=e.graphic?e.graphic:e.result.feature;i.setSymbol(ae)}function H(e){if(e=e.results,e.length>0){app.clearFindGraphics();for(var i=0;i<e.length;i++);var t=new b(e[0].feature.geometry);app.map.centerAndZoom(t,17)}}function W(e,i,t,a,n){return new S({angle:0,xoffset:i,yoffset:t,type:"esriPMS",url:e,contentType:"image/png",width:a,height:n})}function z(e){switch(e){case 0:return $("#st-select")[0].selectedIndex>0?"ST_MRB_ID":"MRB_ID";case 1:return $("#st-select")[0].selectedIndex>0?"SG3":"GP3";case 2:return $("#st-select")[0].selectedIndex>0?"SG2":"GP2";case 3:return $("#st-select")[0].selectedIndex>0?"SG1":"GP1";case 4:return"ST"}}function j(e){function i(){var e=$("#groupResultsSelect")[0].selectedIndex;switch(e){case 0:return"Catchment ID";case 1:return"HUC8";case 2:return"Tributary";case 3:return"Main River Basin";case 4:return"State"}}function t(){var e,i=app.map.getLayer("SparrowRanking").visibleLayers[0],t=app.getLayerConfigObject(i);return $.each(t,function(i,t){t.field==$("#displayedMetricSelect").val()&&(e=t.name)}),e}var a=[],s=[],r=[],o=[],p=[],l=[];$.each(e.features,function(e,i){l.push($.extend(!0,{},i.attributes)),$.map(Object.keys(i.attributes),function(e,t){e.indexOf("AREA")>-1&&delete i.attributes[e]}),p.push(i.attributes)});var c=0;$.each(p,function(e,i){$.each(i,function(e,i){"string"!==jQuery.type(i)&&"MRB_ID"!==e&&(c+=i)}),i.total=c,l[e].total=c,c=0}),p.sort(function(e,i){return parseFloat(i.total)-parseFloat(e.total)}),console.log("featureSort",p),$.each(e.features[0].attributes,function(e,i){s.push(e)}),s.pop(),$.each(s,function(e,i){var t=[];$.each(p,function(e,a){0==$("#groupResultsSelect")[0].selectedIndex?t.push({y:a[i],id:a.MRB_ID||a.ST_MRB_ID}):t.push(a[i])}),r.push(t)}),0==$("#groupResultsSelect")[0].selectedIndex&&r.pop(),s.shift(),$.each(r.shift(),function(e,i){void 0!==i.y?a.push(i.y):a.push(i)});var g=app.map.getLayer("SparrowRanking").visibleLayers[0],f=getChartOutfields(g),u=[];$.each(f,function(e,i){u.push(i.label)}),J=l,ee=[],$.each(u,function(e,i){ee.push(i)}),(0==g||8==g)&&(ee[0]="Name"),V(J,ee),u.shift(),$.each(u,function(e,i){o.push({name:i,turboThreshold:3e3})}),$.each(r,function(e,i){o[e].data=r[e]}),$("#chartWindowDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1,draggable:!0,minWidth:800,minHeight:800,maxHeight:1e3}),$("#chartWindowDiv").addClass("chartWindowMaximize"),$("#chartWindowDiv").removeClass("chartWindowMinimize"),$("#chartWindowDiv").css("visibility","visible"),"radio1"==$('.radio input[type="radio"]:checked')[0].id?($("#chartWindowPanelTitle").text("Phosphorus "+t()),console.log("Radio One")):($("#chartWindowPanelTitle").text("Nitrogen "+t()),console.log("Radio Two")),(e.features.length<=1||app.customChartClicked)&&($("#chartWindowPanelTitle").append('<br/><div class="btn"><button type="button" class="btn btn-primary" id="popupChartButton"><span class="glyphicon glyphicon-signal"></span> Show Full Chart</button></div>'),app.customChartClicked&&(app.customChartClicked=!1)),0==$("#chartClose").length&&$("#chartWindowDiv .dropdown").prepend('<div id="chartClose" title="close"><b>X</b></div>'),$("#popupChartButton").on("click",function(){app.formattedHighlightString="",app.map.graphics.clear(),app.createChartQuery()});var d=$("#chartWindowDiv").data("lobiPanel");d.unpin();var D=d.getPosition().x;d.setPosition(D,50),$("#chartClose").on("click",function(){app.map.graphics.clear(),app.formattedHighlightString="",$("#chartWindowDiv").css("visibility","hidden"),$("#chartWindowContainer").empty(),$("#chartWindowPanelTitle").empty()}),$("#chartWindowDiv").resize(function(){var e=$("#chartWindowDiv").height(),i=$("#chartWindowDiv").width();$("#chartWindowContainer").highcharts().setSize(i-50,e-105,!0)});var m="radio1"==$('.radio input[type="radio"]:checked')[0].id?["#0070C0","#97DA7C","#663100","#FFEC99","#FFCCFF","#BF0000"]:["#0070C0","#663100","#FFEC99","#FFCCFF","#BF0000"];$("#chartWindowContainer").highcharts();$(function(){Highcharts.setOptions({lang:{thousandsSep:","},colors:m}),$("#chartWindowContainer").highcharts({chart:{type:"column",zoomType:"x",backgroundColor:"rgba(255, 255, 255, 0.45)",events:{selection:function(e){function i(e){$.each(app.map.graphics.graphics,function(e,i){"zoomhighlight"==i.symbol.id&&app.map.graphics.remove(i)}),$.each(e.features,function(e,i){var i=i,t=new _(_.STYLE_SOLID,new n([255,255,0]),1);t.id="zoomHighlight",i.setSymbol(t),app.map.graphics.add(i)})}function i(e){$.each(app.map.graphics.graphics,function(e,i){"zoomhighlight"==i.symbol.id&&app.map.graphics.remove(i)}),$.each(e.features,function(e,i){var i=i,t=new _(_.STYLE_SOLID,new n([255,255,0]),1);t.id="zoomHighlight",i.setSymbol(t),app.map.graphics.add(i)})}var t=[];if(e.xAxis){var a=e.xAxis[0];a&&($.each(this.series,function(e,i){$.each(i.points,function(e,i){if(i.x>=a.min&&i.x<=a.max){var n;n=0==$("#groupResultsSelect")[0].selectedIndex?i.id:i.category,-1==t.indexOf(n)&&t.push(n)}})}),U(t)),console.log(t)}app.map.graphics.clear();var s,r=app.map.getLayer("SparrowRanking").visibleLayers[0],o=app.map.getLayer("SparrowRanking").url,p=z($("#groupResultsSelect")[0].selectedIndex);s=new esri.tasks.QueryTask(o+r.toString());var l=new esri.tasks.Query;if(l.returnGeometry=!0,l.outSpatialReference=app.map.spatialReference,l.outFields=[p],1!=e.resetSelection){var c="";$.each(t,function(e,i){c+="MRB_ID"==p?+i+", ":"'"+i+"', "});var g=c.slice(0,c.length-2);l.where=p+" IN ("+g+")",s.execute(l,i)}else app.formattedHighlightString&&(l.where=app.formattedHighlightString,s.execute(l,i)),U()}}},title:{text:null},subtitle:{text:null},exporting:{enabled:!0,buttons:{contextButton:{text:"Chart Options",height:40,symbol:null,align:"right",menuItems:[{text:"Download CSV",onclick:function(){this.downloadCSV()}},{text:"Download Excel",onclick:function(){this.downloadXLS()}},{text:"Change Background Transparency",onclick:function(){"rgba(255, 255, 255, .9)"!=this.chartBackground.element.attributes.fill.value?this.chartBackground.attr({fill:"rgba(255, 255, 255, .9)"}):this.chartBackground.attr({fill:"rgba(255, 255, 255, .1)"})}}]}}},xAxis:{categories:a,title:{text:"Ranked by "+i()}},yAxis:{min:0,title:{text:t()},stackLabels:{enabled:!1,style:{fontWeight:"bold",color:Highcharts.theme&&Highcharts.theme.textColor||"gray"}}},legend:{align:"left",x:10,verticalAlign:"top",y:25,floating:!1,padding:5,backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"white",borderColor:"#CCC",borderWidth:1,shadow:!1,labelFormatter:function(){var e=this.name.indexOf(")"),i="";return i=e>-1?this.name.substring(e+1):this.name}},tooltip:{formatter:function(){var e=this.point.index+1,a=this.point.y/this.point.stackTotal*100;return"<b>"+i()+": <b>"+this.point.category+"</b></b><br/>"+this.series.name+": <b>"+this.point.y.toFixed(2)+" ("+a.toFixed(2)+"%)</b></b><br/>"+t()+" Total: <b>"+this.point.stackTotal.toFixed(2)+"</b></b><br/>Rank: <b>"+e+"</b>"}},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!1,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"}},series:{point:{events:{mouseOver:function(){function e(e){$.each(app.map.graphics.graphics,function(e,i){void 0==i.symbol.id&&app.map.graphics.remove(i)});var i=e.features[0],t=new y(y.STYLE_SOLID,new _(_.STYLE_SOLID,new n([150,49,37]),2),new n([150,49,37,.33]));i.setSymbol(t),app.map.graphics.add(i)}var i,t=0==$("#groupResultsSelect")[0].selectedIndex?this.id:this.category,a=app.map.getLayer("SparrowRanking").visibleLayers[0],s=app.map.getLayer("SparrowRanking").url,r=z($("#groupResultsSelect")[0].selectedIndex);i=new esri.tasks.QueryTask(s+a.toString());var o=new esri.tasks.Query;o.returnGeometry=!0,o.outSpatialReference=app.map.spatialReference,o.outFields=[r],"MRB_ID"!=r?o.where=r+"= '"+t+"'":o.where=r+" = "+t,i.execute(o,e)},click:function(e){var i,t=z($("#groupResultsSelect")[0].selectedIndex);if(i=0==$("#groupResultsSelect")[0].selectedIndex?this.id:this.category,"MRB_ID"!=t)var a=t+" = '"+i+"'";else var a=t+" = "+i;app.map.graphics.clear(),app.createChartQuery(a)}}}}},credits:{enabled:!1},series:o}),$(".highcharts-button-box").click(function(){$.each(app.map.graphics.graphics,function(e,i){"zoomhighlight"==i.symbol.id&&app.map.graphics.remove(i)})})});var b=$("#chartWindowDiv").height(),h=$("#chartWindowDiv").width();$("#chartWindowContainer").highcharts().setSize(h-50,b-105,!0)}function U(e){if(void 0!==e){var i=z($("#groupResultsSelect")[0].selectedIndex),t=[];$.each(e,function(e,a){t.push(J.filter(function(e){return e[i]==a})[0])}),V(t,ee)}else V(J,ee)}function V(e,i){$("#resultsTable").empty();var t=[];$("#resultsTable").addClass("hover-highlight"),$("#resultsTable").append("<thead></thead>"),$.each(i,function(e,i){var a=i.indexOf(")"),n="";n=a>-1?i.substring(a+1):i,t.push(n)});var a=$("#groupResultsSelect")[0].selectedIndex;0==a?(t.push("Basin Area"),t.push("Upstream Area"),t.push("Total")):(t.push("Area"),t.push("Total"));var n=[];n.push("<tr>"),$.each(t,function(e,i){console.log(i),n.push("<th>"+i+"</th>")}),n.push("</tr>"),$("#resultsTable").find("thead").html(n.join(""));var s=[];$("#resultsTable").append('<tbody id="tableBody"></tbody>'),$.each(e,function(e,i){var t=0==a?i.MRB_ID||i.ST_MRB_ID:e;s.push("<tr id='row"+t+"'>"),$.each(i,function(e,i){"MRB_ID"!==e&&"ST_MRB_ID"!==e&&s.push("<td>"+i+"</td>")}),s.push("</tr>")}),$("#tableBody").html(s.join("")),$(".tablesorter").trigger("updateAll"),$(".tablesorter").tablesorter({widthFixed:!0,onRenderHeader:function(){var e="radio1"==$('.radio input[type="radio"]:checked')[0].id?["#0070C0","#97DA7C","#663100","#FFEC99","#FFCCFF","#BF0000"]:["#0070C0","#663100","#FFEC99","#FFCCFF","#BF0000"];if(this.context.cellIndex>0){var i=this.context.cellIndex-1;this.append('<div style="background:'+e[i]+';height: 3px;margin-bottom:2px;"></div>')}}})}function Q(){$("#geosearchModal").modal("show")}function Z(){$("#aboutModal").modal("show")}function q(){$("#userGuideModal").modal("show")}k.parse(),app.dragInfoWindows=!0,app.clickSelectionActive=!1,app.drawSelectionActive=!1,app.userSelectedDispFieldName="",app.userSelectedShapes=[],app.customChartClicked=!1,app.shiftKey=!1,app.formattedHighlightString,app.defaultMapCenter=mapCenter,app.defaultZoom=defaultZoomLevel,app.map=i("mapDiv",{basemap:"gray",center:app.defaultMapCenter,zoom:app.defaultZoom}),app.home=new s({map:app.map},"homeButton"),app.home.startup(),app.locate=new r({map:app.map},"locateButton"),app.locate.startup(),app.geocoder=new f({value:"",maxLocations:25,autoComplete:!0,arcgisGeocoder:!0,autoNavigate:!1,map:app.map},"geosearch"),app.geocoder.startup(),app.geocoder.on("select",B),app.geocoder.on("findResults",H),app.geocoder.on("clear",app.clearFindGraphics),search_api.create("geosearch_usgs",{on_result:function(e){var i=["GNIS_MAJOR","GNIS_MINOR","ZIPCODE","AREACODE"],t=i.indexOf(e.result.properties.Source);-1==t?app.map.setExtent(new esri.geometry.Extent({xmin:e.result.properties.LonMin,ymin:e.result.properties.LatMin,xmax:e.result.properties.LonMax,ymax:e.result.properties.LatMax,spatialReference:{wkid:4326}}),!0):app.map.centerAndZoom(new b(e.result.properties.Lon,e.result.properties.Lat),12),app.map.infoWindow.setTitle("Search Result"),app.map.infoWindow.setContent($.map(Object.keys(e.result.properties),function(i){return"<b>"+i+": </b>"+e.result.properties[i]}).join("<br/>")),$("#geosearchModal").modal("hide"),app.map.infoWindow.show(new b(e.result.properties.Lon,e.result.properties.Lat))},include_usgs_sw:!0,include_huc2:!0,include_huc4:!0,include_huc6:!0,include_huc8:!0,include_huc12:!0});var X={},K=[],J=[],ee=[];loadEventHandlers(),M(serviceBaseURL+5,["ST","GP3","GP2","GP1"],"1=1"),app.setLayerDefObj=function(e){switch(e.selectedId){case"st-select":X.AOIST=e.selectedValue;break;case"grp1-select":X.AOI1=e.selectedValue;break;case"grp2-select":X.AOI2=e.selectedValue;break;case"grp3-select":X.AOI3=e.selectedValue}app.updateAOIs(e.selectedId)},app.getLayerDefObj=function(){return X},app.clearLayerDefObj=function(){
X={},$("#st-select").empty(),$("#grp1-select").empty(),$("#grp2-select").empty(),$("#grp3-select").empty(),E()},app.clearOneLayerDefObj=function(e){switch(e){case"AOIST":X.AOIST=void 0,app.updateAOIs("grp1-select"),app.updateAOIs("grp2-select"),app.updateAOIs("grp3-select");break;case"AOI1":X.AOI1=void 0,app.updateAOIs("st-select"),app.updateAOIs("grp2-select"),app.updateAOIs("grp3-select");break;case"AOI2":X.AOI2=void 0,app.updateAOIs("grp1-select"),app.updateAOIs("grp3-select"),app.updateAOIs("st-select");break;case"AOI3":X.AOI3=void 0,app.updateAOIs("grp1-select"),app.updateAOIs("grp2-select"),app.updateAOIs("st-select")}};var ie=function(e,i){var t=[];for(var a in e)t.map(function(e){return e}).indexOf(e[a][i])<0&&t.push(e[a][i]);return t};app.updateAOIs=function(e){var i=[],t=[],a=[],n=[],s=[];switch(e){case"st-select":X.AOI2?($("#grp1-select").empty(),$("#grp3-select").empty(),i=K.filter(function(e){return e.ST===X.AOIST&&e.GP2===X.AOI2})):($("#grp1-select").empty(),$("#grp3-select").empty(),i=K.filter(function(e){return e.ST===X.AOIST})),0===i.length&&(i=K),n=ie(i,"GP1"),t=ie(i,"GP3"),te(n,"#grp1-select","AOI1",t,"#grp3-select","AOI3"),i=[],X.AOI1?($("#grp2-select").empty(),$("#grp3-select").empty(),i=K.filter(function(e){return e.ST===X.AOIST&&e.GP1===X.AOI1})):($("#grp2-select").empty(),$("#grp3-select").empty(),i=K.filter(function(e){return e.ST===X.AOIST})),0===i.length&&(i=K),a=ie(i,"GP2"),t=ie(i,"GP3"),te(a,"#grp2-select","AOI2",t,"#grp3-select","AOI3"),i=[],X.AOI3?($("#grp1-select").empty(),$("#grp2-select").empty(),i=K.filter(function(e){return e.ST===X.AOIST&&e.GP3===X.AOI3})):($("#grp1-select").empty(),$("#grp2-select").empty(),i=K.filter(function(e){return e.ST===X.AOIST})),0===i.length&&(i=K),n=ie(i,"GP1"),a=ie(i,"GP2"),te(n,"#grp1-select","AOI1",a,"#grp2-select","AOI2");break;case"grp1-select":X.AOI2?($("#st-select").empty(),$("#grp3-select").empty(),i=K.filter(function(e){return e.GP2===X.AOI2&&e.GP1===X.AOI1})):($("#st-select").empty(),$("#grp3-select").empty(),i=K.filter(function(e){return e.GP1===X.AOI1})),0===i.length&&(i=K),s=ie(i,"ST"),t=ie(i,"GP3"),te(s,"#st-select","AOIST",t,"#grp3-select","AOI3"),i=[],X.AOIST?($("#grp2-select").empty(),$("#grp3-select").empty(),i=K.filter(function(e){return e.GP1==X.AOI1&&e.ST==X.AOIST})):($("#grp2-select").empty(),$("#grp3-select").empty(),i=K.filter(function(e){return e.GP1==X.AOI1})),0==i.length&&(i=K),a=ie(i,"GP2"),t=ie(i,"GP3"),te(a,"#grp2-select","AOI2",t,"#grp3-select","AOI3"),i=[],X.AOI3?($("#grp2-select").empty(),$("#st-select").empty(),i=K.filter(function(e){return e.GP1===X.AOI1&&e.GP3===X.AOI3})):($("#grp2-select").empty(),$("#st-select").empty(),i=K.filter(function(e){return e.GP1===X.AOI1})),0===i.length&&(i=K),a=ie(i,"GP2"),s=ie(i,"ST"),te(a,"#grp2-select","AOI2",s,"#st-select","AOIST");break;case"grp2-select":X.AOIST?($("#grp1-select").empty(),$("#grp3-select").empty(),i=K.filter(function(e){return e.GP2===X.AOI2&&e.ST===X.AOIST})):($("#grp1-select").empty(),$("#grp3-select").empty(),i=K.filter(function(e){return e.GP2===X.AOI2})),0===i.length&&(i=K),n=ie(i,"GP1"),t=ie(i,"GP3"),te(n,"#grp1-select","AOI1",t,"#grp3-select","AOI3"),i=[],X.AOI1?($("#st-select").empty(),$("#grp3-select").empty(),i=K.filter(function(e){return e.GP2===X.AOI2&&e.GP1===X.AOI1})):($("#st-select").empty(),$("#grp3-select").empty(),i=K.filter(function(e){return e.GP2===X.AOI2})),0==i.length&&(i=K),s=ie(i,"ST"),t=ie(i,"GP3"),te(s,"#st-select","AOIST",t,"#grp3-select","AOI3"),i=[],X.AOI3?($("#st-select").empty(),$("#grp1-select").empty(),i=K.filter(function(e){return e.GP2===X.AOI2&&e.GP3===X.AOI3})):($("#st-select").empty(),$("#grp1-select").empty(),i=K.filter(function(e){return e.GP2===X.AOI2})),0===i.length&&(i=K),n=ie(i,"GP1"),s=ie(i,"ST"),te(n,"#grp1-select","AOI1",s,"#st-select","AOIST");break;case"grp3-select":X.AOIST?($("#grp1-select").empty(),$("#grp2-select").empty(),i=K.filter(function(e){return e.GP3===X.AOI3&&e.ST===X.AOIST})):($("#grp1-select").empty(),$("#grp2-select").empty(),i=K.filter(function(e){return e.GP3===X.AOI3})),0===i.length&&(i=K),n=ie(i,"GP1"),a=ie(i,"GP2"),te(n,"#grp1-select","AOI1",a,"#grp2-select","AOI2"),i=[],X.AOI1?($("#st-select").empty(),$("#grp2-select").empty(),i=K.filter(function(e){return e.GP3===X.AOI3&&e.GP1===X.AOI1})):($("#st-select").empty(),$("#grp2-select").empty(),i=K.filter(function(e){return e.GP3===X.AOI3})),0==i.length&&(i=K),s=ie(i,"ST"),a=ie(i,"GP2"),te(s,"#st-select","AOIST",a,"#grp2-select","AOI2"),i=[],X.AOI2?($("#st-select").empty(),$("#grp1-select").empty(),i=K.filter(function(e){return e.GP3===X.AOI3&&e.GP2===X.AOI2})):($("#st-select").empty(),$("#grp1-select").empty(),i=K.filter(function(e){return e.GP3===X.AOI3})),0===i.length&&(i=K),n=ie(i,"GP1"),s=ie(i,"ST"),te(n,"#grp1-select","AOI1",s,"#st-select","AOIST")}};var te=function(e,i,t,a,n,s){$.each(e,function(e,t){$(i).append(new Option(t))}),$(i).selectpicker("refresh"),$.each(a,function(e,i){$(n).append(new Option(i))}),$(n).selectpicker("refresh"),X[t]&&$(i).selectpicker("val",X[t]),X[s]&&$(n).selectpicker("val",X[s])};app.initMapScale=function(){var e=app.map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e);var i=O.webMercatorToGeographic(app.map.extent.getCenter());$("#latitude").html(i.y.toFixed(3)),$("#longitude").html(i.x.toFixed(3))},app.updateMousePosition=function(e){if($("#mapCenterLabel").css("display","none"),null!==e.mapPoint){var i=O.webMercatorToGeographic(e.mapPoint);$("#latitude").html(i.y.toFixed(3)),$("#longitude").html(i.x.toFixed(3))}},app.updateMapCenter=function(e){$("#mapCenterLabel").css("display","inline");var i=O.webMercatorToGeographic(e.getCenter());$("#latitude").html(i.y.toFixed(3)),$("#longitude").html(i.x.toFixed(3))},app.setupDraggableInfoWindow=function(){if(app.dragInfoWindows===!0){var e=T(".title",app.map.infoWindow.domNode)[0],i=new x(app.map.infoWindow.domNode,{handle:e});N(i,"FirstMove",function(){var e=T(".outerPointer",app.map.infoWindow.domNode)[0];R.add(e,"hidden");var i=T(".pointer",app.map.infoWindow.domNode)[0];R.add(i,"hidden")}.bind(this))}},app.executeIdentifyTask=function(e){app.shiftKey=e.shiftKey,console.log(e);var i=app.map.getLayer("SparrowRanking").visibleLayers[0];app.identifyParams.layerIds=[i];var t,a,s=app.map.getLayersVisibleAtScale();for(t in s)"nitroCalibration"===s[t].id&&app.map.getLayer("nitroCalibration").visible===!0&&(a=app.map.getLayer("nitroCalibration").visibleLayers[0],app.identifyParams.layerIds.push(a)),"phosCalibration"===s[t].id&&app.map.getLayer("phosCalibration").visible===!0&&(a=app.map.getLayer("phosCalibration").visibleLayers[0],app.identifyParams.layerIds.push(a));app.identifyParams.geometry=e.mapPoint,app.identifyParams.mapExtent=app.map.extent;app.identifyTask.execute(app.identifyParams).addCallback(function(i){if(app.clickSelectionActive)$.each(i,function(e,i){var t=i.feature,a="MRB_ID"==i.displayFieldName?i.value:"'"+i.value+"'";if(app.shiftKey){var s=app.map.graphics.graphics.filter(function(e){return e.symbol.id==i.value})[0];app.map.graphics.remove(s),app.userSelectedShapes.splice(app.userSelectedShapes.indexOf(a),1)}else{var r=new _(_.STYLE_SOLID,new n([255,255,0]),1);r.id=i.value,t.setSymbol(r),app.map.graphics.add(t),app.userSelectedShapes.push(a),""==app.userSelectedDispFieldName&&(app.userSelectedDispFieldName=i.displayFieldName)}});else{var t=!1;if(app.map.graphics.clear(),i.length>=1){var a=new _(_.STYLE_SOLID,new n([255,255,0]),1);if(a.id=i[0].value,i[0].feature.setSymbol(a),app.map.graphics.add(i[0].feature),$.each(i,function(i,a){if(18===a.layerId){var n="Phosphorus",s=new esri.InfoTemplate;s.setTitle("SPARROW "+n+" Calibration Site"),s.setContent("<div><b>Station Name:</b> "+a.feature.attributes.NAME+"</div><br><div><b>Station ID:</b> </b>"+a.feature.attributes.STATION_ID+"</div><br><div><b>SPARROW Reach ID: </b>"+a.feature.attributes.MRB_ID+"</div><br><div><b>Fluxmaster Load"+chartUnits+": </b>"+a.feature.attributes.FLUXMASTER+"</div><br><div><b>SPARROW Estimated Load "+chartUnits+": </b>"+a.feature.attributes.SPARROW_ES+"</div><br>");new d;a.feature.setInfoTemplate(s),app.map.infoWindow.setFeatures([a.feature]),app.map.infoWindow.show(e.mapPoint),t=!0}if(19===a.layerId){var r="Nitrogen",o=new esri.InfoTemplate;o.setTitle("SPARROW "+r+" Calibration Site"),o.setContent("<div><b>Station Name:</b> "+a.feature.attributes.NAME+"</div><br><div><b>Station ID:</b> </b>"+a.feature.attributes.STATION_ID+"</div><br><div><b>SPARROW Reach ID: </b>"+a.feature.attributes.MRB_ID+"</div><br><div><b>Fluxmaster Load"+chartUnits+": </b>"+a.feature.attributes.FLUXMASTER+"</div><br><div><b>SPARROW Estimated Load "+chartUnits+": </b>"+a.feature.attributes.SPARROW_ES+"</div><br>");new d;a.feature.setInfoTemplate(o),app.map.infoWindow.setFeatures([a.feature]),app.map.infoWindow.show(e.mapPoint),t=!0}}),1!=t){var s=getChartOutfields(app.map.getLayer("SparrowRanking").visibleLayers[0]);i[0].feature.attributes;if("MRB_ID"==i[0].displayFieldName)var r=i[0].displayFieldName+" = "+i[0].value;else var r=i[0].displayFieldName+" = '"+i[0].value+"'";$.each(s,function(e,i){console.log(i.attribute)}),app.createChartQuery(r)}}}})},app.clearFindGraphics=function(){app.map.infoWindow.hide(),app.map.graphics.clear()},app.createTableQuery=function(){$("#resultsTable").empty();var e,i=app.map.getLayer("SparrowRanking").visibleLayers[0];if(app.map.getLayer("SparrowRanking").layerDefinitions)var t=app.map.getLayer("SparrowRanking").layerDefinitions[i];else var t="1=1";var a=serviceBaseURL+i;e=new esri.tasks.QueryTask(a);var n=new esri.tasks.Query;n.returnGeometry=!1,n.outFields=["*"],n.where=t},app.createChartQuery=function(e){$("#chartContainer").empty(),console.log("creating chart query");var i,t=app.map.getLayer("SparrowRanking").visibleLayers[0];if(void 0==e)if(app.map.getLayer("SparrowRanking").layerDefinitions)var a=app.map.getLayer("SparrowRanking").layerDefinitions[t];else var a="1=1";else var a=e;var n=serviceBaseURL+t;i=new esri.tasks.QueryTask(n);var s=getChartOutfields(t),r=[];$.each(s,function(e,i){r.push(i.attribute)});var o=new esri.tasks.Query;o.returnGeometry=!1,o.outFields=getExtraOutfields(r,t),o.where=a,i.execute(o,j)},app.getLayerConfigObject=function(e){var i=function(e){switch(e){case 0:return Catchments;case 1:return Group3;case 2:return Group2;case 3:return Group1;case 4:return ST;case 5:return Catchments_st;case 6:return Group3_st;case 7:return Group2_st;case 8:return Group1_st;case 9:return Catchments_tn;case 10:return Group3_tn;case 11:return Group2_tn;case 12:return Group1_tn;case 13:return ST_tn;case 14:return Catchments_st_tn;case 15:return Group3_st_tn;case 16:return Group2_st_tn;case 17:return Group1_st_tn}}(e);return i};var ae=W("../images/purple-pin.png",0,12,13,24);new y(y.STYLE_SOLID,new _(_.STYLE_DASHDOT,new n([255,0,0]),2),new n([255,255,0,.5]));$(document).on("mouseenter","#tableBody tr",function(e){function i(e){$.each(app.map.graphics.graphics,function(e,i){void 0==i.symbol.id&&app.map.graphics.remove(i)});var i=e.features[0],t=new y(y.STYLE_SOLID,new _(_.STYLE_SOLID,new n([150,49,37]),2),new n([150,49,37,.33]));i.setSymbol(t),app.map.graphics.add(i)}var t,a=0==$("#groupResultsSelect")[0].selectedIndex?e.currentTarget.id.substring(3):e.currentTarget.cells[0].innerHTML,s=app.map.getLayer("SparrowRanking").visibleLayers[0],r=app.map.getLayer("SparrowRanking").url,o=z($("#groupResultsSelect")[0].selectedIndex);t=new esri.tasks.QueryTask(r+s.toString());var p=new esri.tasks.Query;p.returnGeometry=!0,p.outSpatialReference=app.map.spatialReference,p.outFields=[o],"MRB_ID"==o?p.where=o+" = "+a:p.where=o+"= '"+a+"'",t.execute(p,i)}),$("#geosearchNav").click(function(){Q()}),$("#aboutNav").click(function(){Z()}),$("#userGuideNav").click(function(){q()}),$("#html").niceScroll(),$("#sidebar").niceScroll(),$("#sidebar").scroll(function(){$("#sidebar").getNiceScroll().resize()}),$("#legendDiv").niceScroll(),app.maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",app.maxLegendHeight),$("#legendCollapse").on("shown.bs.collapse",function(){app.maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",app.maxLegendHeight),app.maxLegendDivHeight=$("#legendElement").height()-parseInt($("#legendHeading").css("height").replace("px","")),$("#legendDiv").css("max-height",app.maxLegendDivHeight)}),$("#legendCollapse").on("hide.bs.collapse",function(){$("#legendElement").css("height","initial")}),require(["dijit/form/CheckBox"],function(e){function i(e,i,t,a,n,s){if(app.map.addLayer(t),t.visible&&void 0!==s.hasOpacitySlider&&1==s.hasOpacitySlider&&void 0!==s.hasZoomto&&1==s.hasZoomto)var r=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+t.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span><span class="glyphicon glyphicon-search pull-right zoomto"></span></button></div>');else if(t.visible||void 0===s.hasOpacitySlider||1!=s.hasOpacitySlider||void 0===s.hasZoomto||1!=s.hasZoomto){if(t.visible&&void 0!==s.hasOpacitySlider&&1==s.hasOpacitySlider&&void 0!==s.hasZoomto&&0==s.hasZoomto)var r=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+t.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+a+'<span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span></button></div>');else if(!t.visible&&void 0!==s.hasOpacitySlider&&1==s.hasOpacitySlider&&void 0!==s.hasZoomto&&0==s.hasZoomto)var r=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+t.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span></button></div>')}else var r=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+t.id+'"type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+a+'<span id="opacity'+camelize(a)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span><span class="glyphicon glyphicon-search pull-right zoomto"></span></button></div>');if(r.click(function(e){$(this).find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$(this).find("button").button("toggle"),e.preventDefault(),e.stopPropagation(),$("#"+camelize(a)).toggle(),t.visible?t.setVisibility(!1):t.setVisibility(!0)}),i){var o=camelize(e);if(!$("#"+o).length){var p=$('<div id="'+o+'"><div class="alert alert-info" role="alert"><strong>'+e+"</strong></div></div>");$("#toggle").append(p)}$("#"+o).append(r),$("#opacity"+camelize(a)).length>0&&$("#opacity"+camelize(a)).hover(function(){$(".opacitySlider").remove();var e=app.map.getLayer(n.id).opacity,i=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+e+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(i),$("#slider")[0].value=100*e,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var i=$("#slider")[0].value/100;console.log("o: "+i),$("#opacityValue").html("Opacity: "+i),app.map.getLayer(n.id).setOpacity(i)})}),$(".zoomto").hover(function(e){$(".zoomDialog").remove();var i=$('<div class="zoomDialog"><label class="zoomClose pull-right">X</label><br><div class="list-group"><a href="#" id="zoomscale" class="list-group-item lgi-zoom zoomscale">Zoom to scale</a> <a id="zoomcenter" href="#" class="list-group-item lgi-zoom zoomcenter">Zoom to center</a><a id="zoomextent" href="#" class="list-group-item lgi-zoom zoomextent">Zoom to extent</a></div></div>');$("body").append(i),$(".zoomDialog").css("left",e.clientX-80),$(".zoomDialog").css("top",e.clientY-5),$(".zoomDialog").mouseleave(function(){$(".zoomDialog").remove()}),$(".zoomClose").click(function(){$(".zoomDialog").remove()}),$("#zoomscale").click(function(e,i){var t=app.map.getLayer("SparrowRanking").minScale;t>0?app.map.setScale(t):console.log("No minimum scale for layer.")}),$("#zoomcenter").click(function(e,i){var t=app.map.getLayer("SparrowRanking").fullExtent.getCenter(),a=new b(t.x,t.y,new w({wkid:4326}));app.map.centerAt(a)}),$("#zoomextent")&&$("#zoomextent").click(function(e,i){var t=app.map.getLayer("SparrowRanking").fullExtent,a=new P;a.outSR=new w(102100),a.geometries=[t],geomService.project(a,function(e){var i=e[0];map.setExtent(i,new w({wkid:102100}))})})})}}$.each(allLayers,function(e,t){$.each(t.layers,function(e,a){if("agisImage"===a.wimOptions.layerType){var n=new c(a.url,a.options);a.wimOptions&&1==a.wimOptions.includeLegend&&legendLayers.push({layer:n,title:legendLayerName}),a.visibleLayers&&n.setVisibleLayers(a.visibleLayers),i(t.groupHeading,t.showGroupHeading,n,e,a.options,a.wimOptions)}else{var n=new p(a.url,a.options);a.visibleLayers&&n.setVisibleLayers(a.visibleLayers),i(t.groupHeading,t.showGroupHeading,n,e,a.options,a.wimOptions)}})})})}),$(".selectpicker").selectpicker();